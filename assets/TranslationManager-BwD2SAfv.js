import{c as le,j as e,u as U,r,s as B,X as Z,m as Q,F as we,n as Ne,e as re,T as X,o as ke,S as Te,b as Ce}from"./index-CkwioJsN.js";import{T as Se,P as Ee}from"./trash-2-Dqo3gUTr.js";import{F as Ie}from"./filter-zeluGvlv.js";import{A as Me}from"./alert-circle-BRhQx-pn.js";import{S as Le}from"./square-pen--24RL2sM.js";import{U as $e}from"./upload-BqyikKsD.js";const ne=le("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);const ie=le("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),Fe={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:"1px"};function D({children:a}){return e.jsx("span",{style:Fe,children:a})}function Ae(a){const{t:o}=U(),[m,c]=r.useState("en"),[n,i]=r.useState(""),[h,f]=r.useState("all"),[j,N]=r.useState(!1),[p,w]=r.useState(null),[y,M]=r.useState(!1),[L,u]=r.useState(!1),k=["all","nav","hero","pages","about","skills","contact","footer","settings","technologies"],x=Object.entries(a.translations[m]||{}).filter(([S,E])=>{const I=S.toLowerCase().includes(n.toLowerCase())||E.toLowerCase().includes(n.toLowerCase()),$=h==="all"||S.startsWith(h);return I&&$}).map(([S,E])=>({key:S,value:E,category:S.split(".")[0]})),b=r.useCallback(()=>{w(null),N(!0)},[]),T=r.useCallback(S=>{w(S),N(!0)},[]),K=r.useCallback(async S=>{if(confirm(o("settings.deleteTranslation")))try{const{data:E}=await B.from("translations").select("id").eq("key",S).eq("language",m).single();E&&await a.deleteTranslation(E.id)}catch(E){console.error("Error deleting translation:",E),alert(o("settings.deleteError"))}},[m,a,o]);return{selectedLanguage:m,searchTerm:n,selectedCategory:h,showEditor:j,editingTranslation:p,showImportExport:y,showValidation:L,setSelectedLanguage:c,setSearchTerm:i,setSelectedCategory:f,setShowEditor:N,setEditingTranslation:w,setShowImportExport:M,setShowValidation:u,handleAddTranslation:b,handleEditTranslation:T,handleDeleteTranslation:K,filteredTranslations:x,categories:k}}function De({isOpen:a,language:o,translation:m,onClose:c,onSave:n}){const{t:i}=U(),[h,f]=r.useState(""),[j,N]=r.useState(""),[p,w]=r.useState(""),[y,M]=r.useState(!1),[L,u]=r.useState("");r.useEffect(()=>{m?(f(m.key),N(m.value),w(m.category)):(f(""),N(""),w("")),u("")},[m,a]);const k=async()=>{if(!h.trim()||!j.trim()||!p.trim()){u(i("admin.translations.allFieldsRequired"));return}try{M(!0),u(""),await n({key:h,value:j,category:p})}catch(x){u(x instanceof Error?x.message:i("admin.translations.saveFailed"))}finally{M(!1)}};return a?e.jsx("div",{className:"modal",children:e.jsxs("div",{className:"modal-panel",children:[e.jsxs("div",{className:"flex items-center justify-between mb-[var(--space-16)]",children:[e.jsx("h2",{className:"text-[length:var(--font-500)] font-semibold text-[var(--text)]",children:i(m?"admin.translations.editTranslation":"admin.translations.addTranslation")}),e.jsx("button",{onClick:c,disabled:y,className:"p-[var(--space-4)] hover:bg-white/10 rounded-[var(--radius-sm)] transition-colors disabled:opacity-50",children:e.jsx(Z,{className:"h-5 w-5 text-gray-400"})})]}),e.jsxs("div",{className:"stack",style:{"--stack-space":"var(--space-16)"},children:[e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:i("admin.translations.language")}),e.jsx("div",{className:"field-static",children:o.toUpperCase()})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:i("admin.translations.key")}),e.jsx("input",{type:"text",value:h,onChange:x=>f(x.target.value),disabled:y||!!m,placeholder:i("admin.translations.keyPlaceholder"),className:"field"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:i("admin.translations.category")}),e.jsx("input",{type:"text",value:p,onChange:x=>w(x.target.value),disabled:y,placeholder:i("admin.translations.categoryPlaceholder"),className:"field"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:i("admin.translations.value")}),e.jsx("textarea",{value:j,onChange:x=>N(x.target.value),disabled:y,placeholder:i("admin.translations.valuePlaceholder"),rows:5,className:"field resize-none"})]}),L&&e.jsx("div",{className:"p-[var(--space-12)] rounded-[var(--radius-md)] bg-red-500/10 border border-red-500/30 text-red-400 text-[length:var(--font-200)]",children:L})]}),e.jsxs("div",{className:"modal-actions",children:[e.jsx("button",{onClick:c,disabled:y,className:"flex-1 px-[var(--space-16)] py-[var(--space-12)] min-h-[var(--size-tap)] rounded-[var(--radius-md)] bg-white/10 text-[var(--text)] text-[length:var(--font-200)] font-medium hover:bg-white/20 transition-colors disabled:opacity-50",children:i("admin.common.cancel")}),e.jsx("button",{onClick:k,disabled:y,className:"flex-1 px-[var(--space-16)] py-[var(--space-12)] min-h-[var(--size-tap)] rounded-[var(--radius-md)] bg-accent text-black text-[length:var(--font-200)] font-medium hover:bg-accent-strong transition-colors disabled:opacity-50 flex items-center justify-center gap-[var(--space-8)]",children:i(y?"admin.translations.saving":"admin.translations.save")})]})]})}):null}function Ue({translations:a,onEdit:o,onDelete:m}){const{t:c}=U();return e.jsx(Q,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-white/10",children:[e.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-gray-300",children:c("settings.key")}),e.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-gray-300",children:c("settings.value")}),e.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-gray-300",children:c("settings.category")}),e.jsx("th",{className:"text-right py-3 px-4 text-sm font-medium text-gray-300",children:c("admin.translations.actions")})]})}),e.jsx("tbody",{children:a.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"text-center py-8 text-gray-400",children:c("admin.translations.noTranslationsFound")})}):a.map(n=>e.jsxs("tr",{className:"border-b border-white/5 hover:bg-white/5",children:[e.jsx("td",{className:"py-3 px-4 text-sm text-white font-mono",children:n.key}),e.jsx("td",{className:"py-3 px-4 text-sm text-gray-300",children:n.value||e.jsx("span",{className:"text-gray-500 italic",children:c("admin.translations.empty")})}),e.jsx("td",{className:"py-3 px-4 text-sm text-gray-400",children:e.jsx("span",{className:"px-2 py-1 bg-white/10 rounded text-xs",children:n.category})}),e.jsx("td",{className:"py-3 px-4 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:()=>o(n),className:"p-1 text-gray-400 hover:text-accent transition-colors",title:c("settings.editTranslation"),children:e.jsx(Le,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>m(n.key),className:"p-1 text-gray-400 hover:text-red-400 transition-colors",title:c("settings.deleteTranslation"),children:e.jsx(Se,{className:"h-4 w-4"})})]})})]},n.key))})]})})})}function Ve({onClose:a,onImport:o,onExport:m,translations:c}){const{t:n}=U(),[i,h]=r.useState(null),[f,j]=r.useState(!1),[N,p]=r.useState(null),w=()=>{const u=JSON.stringify(c,null,2),k=new Blob([u],{type:"application/json"}),x=URL.createObjectURL(k),b=document.createElement("a");b.href=x,b.download="translations.json",b.click(),URL.revokeObjectURL(x),m()},y=()=>{const k=JSON.stringify({en:{"example.key":"Example translation","example.another":"Another example"},ru:{"example.key":"Пример перевода","example.another":"Другой пример"},am:{"example.key":"Օրինակ թարգմանություն","example.another":"Մեկ այլ օրինակ"}},null,2),x=new Blob([k],{type:"application/json"}),b=URL.createObjectURL(x),T=document.createElement("a");T.href=b,T.download="translations-template.json",T.click(),URL.revokeObjectURL(b)},M=u=>{const k=u.target.files?.[0];k&&h(k)},L=()=>{if(!i)return;j(!0),p(null);const u=new FileReader;u.onload=k=>{try{const x=JSON.parse(k.target?.result),b=Ne.parse(x);o(b),j(!1)}catch(x){console.error("Import validation error:",x);let b=n("settings.importFailed");if(x instanceof Error){const T=x.message.toLowerCase();T.includes("duplicate")||T.includes("unique")?b=n("settings.importDuplicate"):T.includes("json")?b=n("settings.importInvalidJson"):(T.includes("validation")||T.includes("parse"))&&(b=n("settings.importValidationFailed"))}p(b),j(!1)}},u.onerror=()=>{p(n("settings.importFailed")),j(!1)},u.readAsText(i)};return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs(Q,{className:"w-full max-w-2xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-white",children:n("settings.importExport")}),e.jsx("button",{onClick:a,className:"p-2 text-gray-400 hover:text-white transition-colors",children:e.jsx(Z,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-white mb-3",children:n("settings.export")}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:w,className:"w-full inline-flex items-center justify-center gap-2 px-4 py-3 bg-accent text-black rounded-lg font-medium hover:bg-accent-strong transition-colors",children:[e.jsx(ie,{className:"h-5 w-5"}),n("settings.exportTranslations")]}),e.jsxs("button",{onClick:y,className:"w-full inline-flex items-center justify-center gap-2 px-4 py-3 bg-white/10 text-white rounded-lg font-medium hover:bg-white/20 transition-colors",children:[e.jsx(we,{className:"h-5 w-5"}),n("settings.downloadTemplate")]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-white mb-3",children:n("settings.import")}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{children:e.jsx("input",{type:"file",accept:".json",onChange:M,className:"w-full px-3 py-2 rounded-lg bg-white/5 border border-white/10 text-white file:mr-3 file:py-1 file:px-3 file:rounded file:border-0 file:bg-accent file:text-black file:text-sm file:font-medium"})}),e.jsxs("button",{onClick:L,disabled:!i||f,className:"w-full inline-flex items-center justify-center gap-2 px-4 py-3 bg-white/10 text-white rounded-lg font-medium hover:bg-white/20 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx($e,{className:"h-5 w-5"}),n(f?"settings.importing":"settings.importTranslations")]}),N&&e.jsx("p",{className:"text-red-400 text-sm",children:N})]})]})]}),e.jsx("div",{className:"flex items-center justify-end gap-3 pt-6",children:e.jsx("button",{onClick:a,className:"px-4 py-2 text-gray-400 hover:text-white transition-colors",children:n("close")})})]})})}function Ke({translations:a,onClose:o}){const{t:m}=U(),[c,n]=r.useState({missingTranslations:[],emptyValues:[]}),i=()=>{const h=new Set,f=["en","ru","am"];f.forEach(p=>{Object.keys(a[p]||{}).forEach(w=>h.add(w))});const j=[],N=[];h.forEach(p=>{f.forEach(w=>{const y=a[w]?.[p];y?y.trim()===""&&N.push(`${p} (${w})`):j.push(`${p} (${w})`)})}),n({missingTranslations:j,emptyValues:N})};return r.useState(()=>{i()}),e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs(Q,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-white",children:m("settings.validation")}),e.jsx("button",{onClick:o,className:"p-2 text-gray-400 hover:text-white transition-colors",children:e.jsx(Z,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(ne,{className:"h-5 w-5 text-yellow-400"}),e.jsx("h3",{className:"text-lg font-medium text-white",children:m("settings.missingTranslations")}),e.jsx("span",{className:"px-2 py-1 bg-yellow-400/20 text-yellow-400 rounded text-sm",children:c.missingTranslations.length})]}),c.missingTranslations.length===0?e.jsxs("div",{className:"flex items-center gap-2 text-green-400",children:[e.jsx(re,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm",children:e.jsx(X,{translationKey:"settings.validation.allPresent",as:"span",shimmerWidth:"220px"})})]}):e.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:c.missingTranslations.map((h,f)=>e.jsx("div",{className:"px-3 py-2 bg-yellow-400/10 border border-yellow-400/20 rounded text-sm text-yellow-300",children:h},f))})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(ne,{className:"h-5 w-5 text-red-400"}),e.jsx("h3",{className:"text-lg font-medium text-white",children:m("settings.emptyValues")}),e.jsx("span",{className:"px-2 py-1 bg-red-400/20 text-red-400 rounded text-sm",children:c.emptyValues.length})]}),c.emptyValues.length===0?e.jsxs("div",{className:"flex items-center gap-2 text-green-400",children:[e.jsx(re,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm",children:e.jsx(X,{translationKey:"settings.validation.noEmpty",as:"span",shimmerWidth:"180px"})})]}):e.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:c.emptyValues.map((h,f)=>e.jsx("div",{className:"px-3 py-2 bg-red-400/10 border border-red-400/20 rounded text-sm text-red-300",children:h},f))})]}),e.jsx("div",{className:"pt-4 border-t border-white/10",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-400",children:[m("settings.validation.totalIssues"),": ",c.missingTranslations.length+c.emptyValues.length]}),e.jsx("button",{onClick:i,className:"px-4 py-2 bg-white/10 text-white rounded-lg font-medium hover:bg-white/20 transition-colors",children:m("settings.validation.revalidate")})]})})]}),e.jsx("div",{className:"flex items-center justify-end gap-3 pt-6",children:e.jsx("button",{onClick:o,className:"px-4 py-2 text-gray-400 hover:text-white transition-colors",children:m("close")})})]})})}const C=["en","ru","am"];function Je(){const{t:a}=U(),o=ke(),[m,c]=r.useState(1),[n,i]=r.useState("all"),[h,f]=r.useState({}),[j,N]=r.useState({}),[p,w]=r.useState([]),[y,M]=r.useState(""),[L,u]=r.useState(""),k=r.useId(),x=r.useId(),b=r.useId(),T=r.useId(),K=r.useId(),S=r.useId(),E=r.useId(),I=20,{selectedLanguage:$,searchTerm:R,selectedCategory:V,showEditor:Y,editingTranslation:J,showImportExport:oe,showValidation:ce,setSelectedLanguage:W,setSearchTerm:de,setSelectedCategory:me,setShowEditor:ee,setShowImportExport:H,setShowValidation:te,handleAddTranslation:xe,handleEditTranslation:pe,handleDeleteTranslation:he,filteredTranslations:O,categories:ue}=Ae(o),G=r.useCallback(async()=>{let s=0,l=[];for(;;){const{data:d,error:g}=await B.from("translation_keys").select("key, category").range(s,s+1e3-1);if(g){console.error("Error loading translation keys:",g);return}if(!d||d.length===0||(l=l.concat(d),d.length<1e3))break;s+=1e3}w(l)},[]);r.useEffect(()=>{G()},[G]),r.useEffect(()=>{if(!y)return;const t=window.setTimeout(()=>M(""),4e3);return()=>window.clearTimeout(t)},[y]),r.useEffect(()=>{if(!L)return;const t=window.setTimeout(()=>u(""),6e3);return()=>window.clearTimeout(t)},[L]),r.useEffect(()=>{c(1)},[R,V,$,n]);const _=r.useMemo(()=>new Map(p.map(t=>[t.key,t.category])),[p]),P=r.useMemo(()=>{const t=new Set;return p.length>0?p.forEach(({key:l})=>t.add(l)):C.forEach(l=>{Object.keys(o.translations[l]||{}).forEach(d=>{t.add(d)})}),Array.from(t).map(l=>{const d=C.filter(g=>{const v=o.translations[g]?.[l];return!v||v.trim()===""});return d.length===0?null:{key:l,category:_.get(l)??l.split(".")[0],missingLanguages:d}}).filter(l=>!!l).filter(({key:l})=>{const d=l.toLowerCase().includes(R.toLowerCase()),g=V==="all"||l.startsWith(V);return d&&g}).sort((l,d)=>l.key.localeCompare(d.key))},[R,V,p,_,o.translations]),q=n==="all"?O.length:P.length,z=Math.max(1,Math.ceil(q/I)),F=Math.min(m,z),ge=r.useMemo(()=>{const t=(F-1)*I;return O.slice(t,t+I)},[O,F,I]),se=r.useMemo(()=>{const t=(F-1)*I;return P.slice(t,t+I)},[P,F,I]),ve=async(t,s)=>{const l=h[t]?.[s]?.trim()??"";if(!l){const v=a("admin.translations.allFieldsRequired");u(v),alert(v);return}const d=_.get(t)??t.split(".")[0],g=`${t}::${s}`;N(v=>({...v,[g]:!0}));try{const{data:v}=await B.from("translations").select("id").eq("key",t).eq("language",s).single();v?await o.updateTranslation(v.id,{key:t,value:l,category:d}):await o.createTranslation({key:t,value:l,category:d,language:s}),f(A=>({...A,[t]:{...A[t]??{},[s]:""}})),await G(),M(`${a("success")}: ${t} (${s.toUpperCase()})`)}catch(v){console.error("Error saving translation:",v);const A=a("admin.error.saveFailed");u(A),alert(A)}finally{N(v=>({...v,[g]:!1}))}},fe=async t=>{if(typeof navigator<"u"&&navigator.clipboard?.writeText)return await navigator.clipboard.writeText(t),!0;if(typeof document>"u")return!1;const s=document.createElement("textarea");s.value=t,s.setAttribute("readonly","true"),s.style.position="fixed",s.style.top="0",s.style.left="0",s.style.opacity="0",document.body.appendChild(s),s.select();const l=document.execCommand("copy");return document.body.removeChild(s),l},ye=async t=>{const s=C.reduce((l,d)=>{const g=h[t.key]?.[d]?.trim(),v=o.translations[d]?.[t.key]??"";return l[d]=g&&g.length>0?g:v,l},{});try{const l={key:t.key,values:s};if(!await fe(JSON.stringify(l,null,2)))throw new Error("Copy failed");M(`${a("success")}: ${t.key}`)}catch(l){console.error("Error copying translation:",l);const d=a("admin.error.saveFailed");u(d),alert(d)}},be=t=>{const s=["all","missing"],l=s.indexOf(n);t.key==="ArrowRight"&&(t.preventDefault(),i(s[(l+1)%s.length])),t.key==="ArrowLeft"&&(t.preventDefault(),i(s[(l-1+s.length)%s.length])),t.key==="Home"&&(t.preventDefault(),i("all")),t.key==="End"&&(t.preventDefault(),i("missing"))},je=t=>{const s=C.indexOf($);t.key==="ArrowRight"&&(t.preventDefault(),W(C[(s+1)%C.length])),t.key==="ArrowLeft"&&(t.preventDefault(),W(C[(s-1+C.length)%C.length]))};return e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsx("h2",{className:"text-[length:var(--font-600)] font-semibold text-[var(--text)]",children:e.jsx(X,{translationKey:"admin.translations.title",as:"span",shimmerWidth:"250px"})})}),e.jsx(D,{children:e.jsx("span",{role:"status","aria-live":"polite",children:y})}),e.jsx(D,{children:e.jsx("span",{role:"alert",children:L})}),e.jsxs("div",{className:"flex flex-wrap gap-[var(--space-8)] mb-6 border-b border-[var(--border)]",role:"tablist","aria-label":a("settings.translations"),onKeyDown:be,children:[e.jsxs("button",{type:"button",onClick:()=>i("all"),role:"tab",id:k,"aria-controls":b,"aria-selected":n==="all",tabIndex:n==="all"?0:-1,className:`pb-[var(--space-8)] px-[var(--space-4)] text-[length:var(--font-100)] font-medium border-b-2 transition-colors ${n==="all"?"border-accent text-[var(--text)]":"border-transparent text-[var(--text-muted)] hover:text-[var(--text)]"}`,children:[a("admin.translations.title"),e.jsx("span",{className:"ml-[var(--space-8)] text-[var(--text-muted)]",children:O.length})]}),e.jsxs("button",{type:"button",onClick:()=>i("missing"),role:"tab",id:x,"aria-controls":T,"aria-selected":n==="missing",tabIndex:n==="missing"?0:-1,className:`pb-[var(--space-8)] px-[var(--space-4)] text-[length:var(--font-100)] font-medium border-b-2 transition-colors ${n==="missing"?"border-accent text-[var(--text)]":"border-transparent text-[var(--text-muted)] hover:text-[var(--text)]"}`,children:[a("settings.missingTranslations"),e.jsx("span",{className:"ml-[var(--space-8)] text-[var(--text-muted)]",children:P.length})]})]}),n==="all"&&e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("span",{className:"text-[var(--text-muted)] text-[length:var(--font-100)]",children:a("admin.translations.languageLabel")}),e.jsxs("div",{className:"flex gap-[var(--space-8)]",role:"radiogroup","aria-labelledby":E,onKeyDown:je,children:[e.jsx(D,{children:e.jsx("span",{id:E,children:a("admin.translations.languageLabel")})}),C.map(t=>e.jsx("button",{onClick:()=>W(t),role:"radio","aria-checked":$===t,tabIndex:$===t?0:-1,className:`px-[var(--space-12)] py-[var(--space-4)] rounded-[var(--radius-md)] text-[length:var(--font-100)] font-medium transition-colors ${$===t?"bg-accent text-black":"bg-[var(--surface-strong)] text-[var(--text-muted)] hover:text-[var(--text)]"}`,children:t.toUpperCase()},t))]})]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-[var(--space-16)] mb-6",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(Te,{"aria-hidden":"true",className:"absolute left-[var(--space-12)] top-1/2 transform -translate-y-1/2 h-[var(--space-16)] w-[var(--space-16)] text-[var(--text-muted)]"}),e.jsx(D,{children:e.jsx("label",{htmlFor:K,children:a("settings.searchPlaceholder")})}),e.jsx("input",{type:"text",id:K,placeholder:a("settings.searchPlaceholder"),value:R,onChange:t=>de(t.target.value),className:"field pl-[var(--space-32)] pr-[var(--space-16)]"})]})}),e.jsx("div",{className:"flex gap-[var(--space-8)]",children:e.jsxs("div",{className:"relative",children:[e.jsx(Ie,{"aria-hidden":"true",className:"absolute left-[var(--space-12)] top-1/2 transform -translate-y-1/2 h-[var(--space-16)] w-[var(--space-16)] text-[var(--text-muted)]"}),e.jsx(D,{children:e.jsx("label",{htmlFor:S,children:a("settings.filterByCategory")})}),e.jsxs("select",{id:S,value:V,onChange:t=>me(t.target.value),className:"pl-10 pr-8 admin-select appearance-none",children:[e.jsx("option",{value:"all",children:a("settings.allCategories")}),ue.slice(1).map(t=>e.jsx("option",{value:t,children:t.charAt(0).toUpperCase()+t.slice(1)},t))]})]})})]}),e.jsxs("div",{className:"flex flex-wrap gap-[var(--space-8)] mb-6",children:[e.jsxs("button",{onClick:xe,className:"btn btn-primary inline-flex items-center gap-[var(--space-8)]",children:[e.jsx(Ee,{className:"h-[var(--space-16)] w-[var(--space-16)]"}),a("settings.addTranslation")]}),e.jsxs("button",{onClick:()=>H(!0),className:"btn btn-secondary inline-flex items-center gap-[var(--space-8)]",children:[e.jsx(ie,{className:"h-[var(--space-16)] w-[var(--space-16)]"}),a("settings.importExport")]}),e.jsxs("button",{onClick:()=>te(!0),className:"btn btn-secondary inline-flex items-center gap-[var(--space-8)]",children:[e.jsx(Me,{"aria-hidden":"true",className:"h-[var(--space-16)] w-[var(--space-16)]"}),a("settings.validation")]})]}),e.jsx("div",{role:"tabpanel",id:b,"aria-labelledby":k,hidden:n!=="all",children:n==="all"&&e.jsx("div",{className:"bg-[var(--surface)] rounded-[var(--radius-md)] border border-[var(--border)] overflow-hidden","aria-busy":o.isLoading,children:e.jsx(Ue,{translations:ge,onEdit:pe,onDelete:he})})}),e.jsx("div",{role:"tabpanel",id:T,"aria-labelledby":x,hidden:n!=="missing",children:n==="missing"&&e.jsx("div",{className:"bg-[var(--surface)] rounded-[var(--radius-md)] border border-[var(--border)] overflow-hidden","aria-busy":o.isLoading,children:e.jsxs("table",{className:"w-full table-fixed",children:[e.jsx("caption",{className:"text-left px-[var(--space-16)] py-[var(--space-12)] text-[length:var(--font-100)] text-[var(--text-muted)]",children:a("settings.missingTranslations")}),e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-[var(--border)]",children:[e.jsx("th",{scope:"col",className:"text-left py-[var(--space-12)] px-[var(--space-16)] text-[length:var(--font-100)] font-medium text-[var(--text-muted)]",children:a("settings.key")}),C.map(t=>e.jsx("th",{scope:"col",className:"text-left py-[var(--space-12)] px-[var(--space-16)] text-[length:var(--font-100)] font-medium text-[var(--text-muted)]",children:t.toUpperCase()},t)),e.jsx("th",{scope:"col",className:"text-left py-[var(--space-12)] px-[var(--space-16)] text-[length:var(--font-100)] font-medium text-[var(--text-muted)]",children:a("settings.category")})]})}),e.jsx("tbody",{children:se.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:C.length+2,className:"text-center py-[var(--space-32)] text-[var(--text-muted)] text-[length:var(--font-100)]",children:a("admin.translations.empty.notFound")})}):se.map(t=>e.jsxs("tr",{className:"border-b border-[var(--border)]/40 hover:bg-[var(--surface-strong)]",children:[e.jsx("td",{className:"py-[var(--space-12)] px-[var(--space-16)] text-[length:var(--font-100)] text-[var(--text)] font-mono",children:e.jsxs("div",{className:"flex flex-wrap items-start gap-[var(--space-8)]",children:[e.jsx("span",{className:"break-all",children:t.key}),e.jsxs("button",{type:"button",onClick:()=>ye(t),className:"btn btn-secondary inline-flex items-center gap-[var(--space-4)] text-[length:var(--font-100)]","aria-label":`Copy ${t.key}`,children:[e.jsx(Ce,{"aria-hidden":"true",className:"h-[var(--space-12)] w-[var(--space-12)]"}),e.jsx("span",{children:"Copy"})]})]})}),C.map(s=>{const l=o.translations[s]?.[t.key]??"",d=!l||l.trim()==="",g=`${t.key}::${s}`,v=`${t.key} ${s.toUpperCase()} ${a("settings.value")}`;return e.jsx("td",{className:"py-[var(--space-12)] px-[var(--space-16)] text-[length:var(--font-100)] text-[var(--text-muted)] align-top break-words","aria-busy":j[g],children:d?e.jsxs("div",{className:"flex flex-col gap-[var(--space-8)]",children:[e.jsx(D,{children:e.jsx("label",{htmlFor:`${t.key}-${s}`,children:v})}),e.jsx("input",{id:`${t.key}-${s}`,type:"text",value:h[t.key]?.[s]??"",onChange:A=>f(ae=>({...ae,[t.key]:{...ae[t.key]??{},[s]:A.target.value}})),placeholder:a("settings.value"),className:"field w-full min-w-0",disabled:j[g]}),e.jsx("button",{type:"button",onClick:()=>ve(t.key,s),className:"btn btn-secondary",disabled:j[g],"aria-label":`${a("save")} ${t.key} ${s.toUpperCase()}`,children:a("save")})]}):e.jsx("span",{className:"text-[var(--text)] break-words whitespace-pre-wrap",children:l})},`${t.key}-${s}`)}),e.jsx("td",{className:"py-[var(--space-12)] px-[var(--space-16)] text-[length:var(--font-100)] text-[var(--text-muted)] break-words",children:e.jsx("span",{className:"px-[var(--space-8)] py-[var(--space-4)] bg-[var(--surface-strong)] rounded-[var(--radius-sm)] text-[length:var(--font-100)]",children:t.category})})]},t.key))})]})})}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-[var(--space-12)] mt-[var(--space-16)]",children:[e.jsxs("p",{className:"text-[length:var(--font-100)] text-[var(--text-muted)]",role:"status","aria-live":"polite",children:["Showing ",q===0?0:(F-1)*I+1,"-",Math.min(F*I,q)," of ",q]}),e.jsxs("div",{className:"flex items-center gap-[var(--space-8)]",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>c(t=>Math.max(1,t-1)),disabled:F===1,children:"Prev"}),e.jsxs("span",{className:"text-[length:var(--font-100)] text-[var(--text-muted)]",children:[F," / ",z]}),e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>c(t=>Math.min(z,t+1)),disabled:F===z,children:"Next"})]})]}),Y&&e.jsx(De,{mode:"simple",isOpen:Y,language:$,translation:J,onClose:()=>ee(!1),onSave:async t=>{try{if(J){const{data:s}=await B.from("translations").select("id").eq("key",J.key).eq("language",$).single();s&&await o.updateTranslation(s.id,{key:t.key,value:t.value,category:t.category})}else await o.createTranslation({key:t.key,value:t.value,category:t.category,language:$});ee(!1)}catch(s){console.error("Error saving translation:",s),alert(a("admin.error.saveFailed"))}}}),oe&&e.jsx(Ve,{translations:o.translations,onClose:()=>H(!1),onImport:async t=>{try{const s=[];for(const[l,d]of Object.entries(t))for(const[g,v]of Object.entries(d)){const A=g.split(".")[0];s.push({key:g,value:v,category:A,language:l})}await o.bulkImport(s),H(!1)}catch(s){console.error("Error importing translations:",s),alert(a("admin.error.importFailed"))}},onExport:()=>{console.log("Export translations")}}),ce&&e.jsx(Ke,{translations:o.translations,onClose:()=>te(!1)})]})}export{Je as TranslationManager};
