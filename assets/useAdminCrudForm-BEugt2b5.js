import{r as t}from"./index-siMbvs9L.js";import{m as k}from"./zodErrorHandler-CM_HDYk9.js";function K(b){const{createItem:d,updateItem:f,deleteItem:E,schema:h,initialFormData:o,language:s,confirmDeleteKey:p,deleteErrorKey:D,t:n,itemToFormData:y=e=>e}=b,[g,l]=t.useState(!1),[r,S]=t.useState(null),[c,i]=t.useState(o),[w,m]=t.useState({}),u=t.useCallback(()=>{S(null),i(o),m({}),l(!1)},[o]),C=t.useCallback(async e=>{e.preventDefault(),m({});try{const a=h.parse(c);r?await f(r.id,a,s):await d(a,s),u()}catch(a){m(k(a))}},[c,r,h,d,f,s,u]),F=t.useCallback(e=>{S(e),i(y(e)),l(!0)},[y]),I=t.useCallback(async e=>{if(confirm(n(p)))try{await E(e)}catch(a){console.error("Error deleting item:",a),alert(n(D))}},[E,p,D,n]);return{showEditor:g,setShowEditor:l,editingItem:r,formData:c,setFormData:i,errors:w,handleSubmit:C,handleEdit:F,handleDelete:I,resetForm:u}}export{K as u};
