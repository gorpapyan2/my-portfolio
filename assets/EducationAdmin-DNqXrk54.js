import{u as P,r as d,v as k,j as e,T as j,w as q}from"./index-DiO0CGqv.js";import{P as g,T as L}from"./trash-2-BQk5RIGf.js";import{S as T}from"./square-pen-BWLj_Xzz.js";function R({onClose:f}){const{t:a,language:b}=P(),[l,x]=d.useState(b),{education:h,isLoading:N,createEducation:y,updateEducation:E,deleteEducation:w}=k({language:l}),[C,o]=d.useState(!1),[c,m]=d.useState(null),[s,n]=d.useState({degree:"",school:"",year:"",description:"",order_index:0}),[r,u]=d.useState({}),S=async t=>{t.preventDefault(),u({});try{const i=q.parse(s);c?await E(c.id,i,l):await y(i,l),o(!1),m(null),n({degree:"",school:"",year:"",description:"",order_index:0})}catch(i){if(i instanceof Error&&"issues"in i){const v={};i.issues.forEach(p=>{v[p.path[0]]=p.message}),u(v)}}},_=t=>{m(t),n({degree:t.degree,school:t.school,year:t.year,description:t.description,order_index:t.order_index}),o(!0)},D=async t=>{if(confirm(a("admin.education.confirm.delete")))try{await w(t)}catch(i){console.error("Error deleting education:",i),alert(a("admin.education.error.deleteFailed"))}};return N?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(j,{translationKey:"admin.common.loading",as:"div",shimmerWidth:"100px",className:"text-[var(--text)]"})}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-[length:var(--font-600)] font-semibold text-[var(--text)]",children:e.jsx(j,{translationKey:"admin.education.title",as:"span",shimmerWidth:"220px"})}),e.jsx("button",{onClick:f,className:"p-2 text-[var(--text-muted)] hover:text-[var(--text)] transition-colors",children:"Ã—"})]}),C?e.jsxs("form",{onSubmit:S,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:a("admin.common.language")}),e.jsxs("select",{value:l,onChange:t=>x(t.target.value),className:"field",children:[e.jsx("option",{value:"en",children:"English"}),e.jsx("option",{value:"ru",children:"Russian"}),e.jsx("option",{value:"am",children:"Armenian"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:a("admin.education.form.degree")}),e.jsx("input",{type:"text",value:s.degree,onChange:t=>n({...s,degree:t.target.value}),className:`field ${r.degree?"border-red-500":"border-[var(--border)]"}`,placeholder:a("admin.education.degreePlaceholder"),required:!0}),r.degree&&e.jsx("p",{className:"text-red-400 text-[length:var(--font-100)] mt-1",children:r.degree})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:a("admin.education.form.school")}),e.jsx("input",{type:"text",value:s.school,onChange:t=>n({...s,school:t.target.value}),className:`field ${r.school?"border-red-500":"border-[var(--border)]"}`,placeholder:a("admin.education.schoolPlaceholder"),required:!0}),r.school&&e.jsx("p",{className:"text-red-400 text-[length:var(--font-100)] mt-1",children:r.school})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:a("admin.education.form.year")}),e.jsx("input",{type:"text",value:s.year,onChange:t=>n({...s,year:t.target.value}),className:`field ${r.year?"border-red-500":"border-[var(--border)]"}`,placeholder:a("admin.education.yearPlaceholder"),required:!0}),r.year&&e.jsx("p",{className:"text-red-400 text-[length:var(--font-100)] mt-1",children:r.year})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:a("admin.common.description")}),e.jsx("textarea",{value:s.description,onChange:t=>n({...s,description:t.target.value}),rows:3,className:`field ${r.description?"border-red-500":"border-[var(--border)]"}`,placeholder:a("admin.education.additionalDetails"),required:!0}),r.description&&e.jsx("p",{className:"text-red-400 text-[length:var(--font-100)] mt-1",children:r.description})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:a("admin.common.orderIndex")}),e.jsx("input",{type:"number",value:s.order_index,onChange:t=>n({...s,order_index:parseInt(t.target.value)||0}),className:"field",min:"0"})]}),e.jsxs("div",{className:"flex items-center justify-end gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>{o(!1),m(null),n({degree:"",school:"",year:"",description:"",order_index:0})},className:"btn btn-secondary",children:a("admin.common.cancel")}),e.jsxs("button",{type:"submit",className:"inline-flex items-center gap-2 btn btn-primary",children:[e.jsx(g,{className:"h-4 w-4"}),a(c?"admin.education.button.update":"admin.education.button.create")]})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 mb-6",children:[e.jsxs("h3",{className:"text-[length:var(--font-400)] font-medium text-[var(--text)]",children:[a("admin.education.titleCount")," (",h.length,")"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("select",{value:l,onChange:t=>x(t.target.value),className:"field",children:[e.jsx("option",{value:"en",children:"English"}),e.jsx("option",{value:"ru",children:"Russian"}),e.jsx("option",{value:"am",children:"Armenian"})]}),e.jsxs("button",{onClick:()=>o(!0),className:"inline-flex items-center gap-2 btn btn-primary",children:[e.jsx(g,{className:"h-4 w-4"}),a("admin.education.addEducation")]})]})]}),e.jsx("div",{className:"space-y-4",children:h.map(t=>e.jsx("div",{className:"p-4 bg-[var(--surface)] rounded-[var(--radius-md)] border border-[var(--border)]",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-[length:var(--font-400)] font-medium text-[var(--text)] mb-2",children:t.degree}),e.jsx("p",{className:"text-[var(--text-muted)] text-[length:var(--font-100)] mb-2",children:t.school}),e.jsx("p",{className:"text-[var(--text-muted)] text-[length:var(--font-100)] mb-2",children:t.year}),e.jsx("p",{className:"text-[var(--text-muted)] mb-2",children:t.description}),e.jsxs("div",{className:"text-[length:var(--font-100)] text-[var(--text-muted)]",children:[a("admin.education.card.order")," ",t.order_index," | ",a("admin.education.card.created")," ",new Date(t.created_at).toLocaleDateString()]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>_(t),className:"p-2 text-[var(--text-muted)] hover:text-[var(--text)] transition-colors",children:e.jsx(T,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>D(t.id),className:"p-2 text-[var(--text-muted)] hover:text-red-400 transition-colors",children:e.jsx(L,{className:"h-4 w-4"})})]})]})},t.id))})]})]})}export{R as EducationAdmin};
