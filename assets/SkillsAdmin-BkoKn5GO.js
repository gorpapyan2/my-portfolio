import{u as L,r as d,x as T,j as e,T as j,y as I,z as q}from"./index-jIcqUQKv.js";import{P as f,T as A}from"./trash-2-8Fj46AdX.js";import{S as $}from"./square-pen-DU6Xpe4r.js";function R({onClose:g}){const{t:s,language:b}=L(),[i,x]=d.useState(b),{skills:h,isLoading:N,createSkill:y,updateSkill:S,deleteSkill:w}=T({language:i}),[C,c]=d.useState(!1),[o,m]=d.useState(null),[a,n]=d.useState({title:"",description:"",icon:"Code2",level:0,order_index:0}),[r,u]=d.useState({}),k=["Code2","GitBranch","Workflow","Kanban","Database","Bug","Globe","Lightbulb","Smartphone","Table"],E=async t=>{t.preventDefault(),u({});try{const l=q.parse(a);o?await S(o.id,l,i):await y(l,i),c(!1),m(null),n({title:"",description:"",icon:"Code2",level:0,order_index:0})}catch(l){if(l instanceof Error&&"issues"in l){const v={};l.issues.forEach(p=>{v[p.path[0]]=p.message}),u(v)}}},_=t=>{m(t),n({title:t.title,description:t.description,icon:t.icon,level:t.level,order_index:t.order_index}),c(!0)},D=async t=>{if(confirm(s("admin.skills.confirm.delete")))try{await w(t)}catch(l){console.error("Error deleting skill:",l),alert(s("admin.skills.error.deleteFailed"))}};return N?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(j,{translationKey:"admin.common.loading",as:"div",shimmerWidth:"100px",className:"text-[var(--text)]"})}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-[length:var(--font-600)] font-semibold text-[var(--text)]",children:e.jsx(j,{translationKey:"admin.skills.title",as:"span",shimmerWidth:"180px"})}),e.jsx("button",{onClick:g,className:"p-2 text-[var(--text-muted)] hover:text-[var(--text)] transition-colors",children:"Ã—"})]}),C?e.jsxs("form",{onSubmit:E,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:s("admin.common.language")}),e.jsxs("select",{value:i,onChange:t=>x(t.target.value),className:"field",children:[e.jsx("option",{value:"en",children:"English"}),e.jsx("option",{value:"ru",children:"Russian"}),e.jsx("option",{value:"am",children:"Armenian"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:s("admin.skills.form.title")}),e.jsx("input",{type:"text",value:a.title,onChange:t=>n({...a,title:t.target.value}),className:`field ${r.title?"border-red-500":"border-[var(--border)]"}`,required:!0}),r.title&&e.jsx("p",{className:"text-red-400 text-[length:var(--font-100)] mt-1",children:r.title})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:s("admin.skills.form.icon")}),e.jsx("select",{value:a.icon,onChange:t=>n({...a,icon:t.target.value}),className:"w-full admin-select",children:k.map(t=>e.jsx("option",{value:t,children:t},t))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:s("admin.common.description")}),e.jsx("textarea",{value:a.description,onChange:t=>n({...a,description:t.target.value}),rows:3,className:`field ${r.description?"border-red-500":"border-[var(--border)]"}`,required:!0}),r.description&&e.jsx("p",{className:"text-red-400 text-[length:var(--font-100)] mt-1",children:r.description})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:s("admin.skills.form.level")}),e.jsx("input",{type:"number",value:a.level,onChange:t=>n({...a,level:parseInt(t.target.value)||0}),className:`field ${r.level?"border-red-500":"border-[var(--border)]"}`,min:"0",max:"100",required:!0}),r.level&&e.jsx("p",{className:"text-red-400 text-[length:var(--font-100)] mt-1",children:r.level})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:s("admin.common.orderIndex")}),e.jsx("input",{type:"number",value:a.order_index,onChange:t=>n({...a,order_index:parseInt(t.target.value)||0}),className:"field",min:"0"})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>{c(!1),m(null),n({title:"",description:"",icon:"Code2",level:0,order_index:0})},className:"btn btn-secondary",children:s("admin.common.cancel")}),e.jsxs("button",{type:"submit",className:"inline-flex items-center gap-2 btn btn-primary",children:[e.jsx(f,{className:"h-4 w-4"}),s(o?"admin.skills.button.update":"admin.skills.button.create")]})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 mb-6",children:[e.jsxs("h3",{className:"text-[length:var(--font-400)] font-medium text-[var(--text)]",children:[s("admin.skills.titleCount")," (",h.length,")"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("select",{value:i,onChange:t=>x(t.target.value),className:"field",children:[e.jsx("option",{value:"en",children:"English"}),e.jsx("option",{value:"ru",children:"Russian"}),e.jsx("option",{value:"am",children:"Armenian"})]}),e.jsxs("button",{onClick:()=>c(!0),className:"inline-flex items-center gap-2 btn btn-primary",children:[e.jsx(f,{className:"h-4 w-4"}),s("admin.skills.addSkill")]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:h.map(t=>{const l=I(t.icon);return e.jsxs("div",{className:"p-4 bg-[var(--surface)] rounded-[var(--radius-md)] border border-[var(--border)]",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-2 rounded-[var(--radius-md)] bg-accent/10 text-accent",children:e.jsx(l,{className:"h-4 w-4"})}),e.jsx("h4",{className:"text-[length:var(--font-400)] font-medium text-[var(--text)]",children:t.title})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>_(t),className:"p-1 text-[var(--text-muted)] hover:text-[var(--text)] transition-colors",children:e.jsx($,{className:"h-3 w-3"})}),e.jsx("button",{onClick:()=>D(t.id),className:"p-1 text-[var(--text-muted)] hover:text-red-400 transition-colors",children:e.jsx(A,{className:"h-3 w-3"})})]})]}),e.jsx("p",{className:"text-[var(--text-muted)] text-[length:var(--font-100)] mb-3",children:t.description}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center text-[length:var(--font-100)]",children:[e.jsx("span",{className:"text-[var(--text-muted)]",children:s("admin.skills.card.proficiency")}),e.jsxs("span",{className:"text-accent font-semibold",children:[t.level,"%"]})]}),e.jsx("div",{className:"relative h-2 bg-[var(--surface-strong)] rounded-full overflow-hidden",children:e.jsx("div",{className:"absolute top-0 left-0 h-full bg-gradient-to-r from-accent to-accent/80 rounded-full",style:{width:`${t.level}%`}})})]}),e.jsxs("div",{className:"text-[length:var(--font-100)] text-[var(--text-muted)] mt-2",children:[s("admin.experience.orderLabel")," ",t.order_index," | ",s("admin.experience.createdLabel")," ",new Date(t.created_at).toLocaleDateString()]})]},t.id)})})]})]})}export{R as SkillsAdmin};
