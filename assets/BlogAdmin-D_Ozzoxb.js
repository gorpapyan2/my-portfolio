import{c as k,Z as X,r as i,j as e,u as H,E as ee,a as W,C as re,b as ne,g as le,s as ce,F as M,d as ie,e as B,G as te,f as Y,h as ae,i as oe,R as de,T as O,k as me}from"./index-CkwioJsN.js";import{P as J,T as ue}from"./trash-2-Dqo3gUTr.js";import{I as xe}from"./ImageUpload-CMlqmZXI.js";import{A as pe}from"./alert-circle-BRhQx-pn.js";import{S as he}from"./square-pen--24RL2sM.js";import"./upload-BqyikKsD.js";const ge=k("Bold",[["path",{d:"M14 12a4 4 0 0 0 0-8H6v8",key:"v2sylx"}],["path",{d:"M15 20a4 4 0 0 0 0-8H6v8Z",key:"1ef5ya"}]]);const ve=k("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);const fe=k("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);const be=k("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);const ye=k("Italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]);const je=k("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);const Ne=k("ListOrdered",[["line",{x1:"10",x2:"21",y1:"6",y2:"6",key:"76qw6h"}],["line",{x1:"10",x2:"21",y1:"12",y2:"12",key:"16nom4"}],["line",{x1:"10",x2:"21",y1:"18",y2:"18",key:"u3jurt"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]]);const ke=k("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);const we=k("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);const Se=k("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);const Ce=k("Quote",[["path",{d:"M3 21c3 0 7-1 7-8V5c0-1.25-.756-2.017-2-2H4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2 1 0 1 0 1 1v1c0 1-1 2-2 2s-1 .008-1 1.031V20c0 1 0 1 1 1z",key:"4rm80e"}],["path",{d:"M15 21c3 0 7-1 7-8V5c0-1.25-.757-2.017-2-2h-4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2h.75c0 2.25.25 4-2.75 4v3c0 1 0 1 1 1z",key:"10za9r"}]]);const Ee=k("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);const Te=k("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);const $e=k("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);function ze(a){if(a instanceof X){const l={};return a.issues.forEach(s=>{const n=s.path[0]?.toString()||"root";l[n]=s.message}),l}return a instanceof Error?{root:a.message}:{root:"An unexpected error occurred during validation"}}function Ae(a){return a instanceof X}const G={title:"",slug:"",excerpt:"",content:"",image:"",read_time:"",published:!0};function Oe(){const[a,l]=i.useState(!1),[s,n]=i.useState(null),[x,p]=i.useState(G),[m,o]=i.useState({}),t=i.useCallback(()=>{l(!1),n(null),p(G),o({})},[]),g=i.useCallback(r=>{n(r),p({title:r.title,slug:r.slug,excerpt:r.excerpt,content:r.content||"",image:r.image||"",read_time:r.read_time,published:r.published}),l(!0),o({})},[]),v=i.useCallback(r=>{p(f=>({...f,...r}))},[]),h=i.useCallback(r=>{const f=ze(r);o(f)},[]),u=i.useCallback(r=>{o(f=>{const b={...f};return delete b[r],b})},[]);return{showEditor:a,editingPost:s,formData:x,errors:m,setShowEditor:l,setEditingPost:n,setFormData:p,setErrors:o,resetForm:t,setEditingPostData:g,handleFormChange:v,handleValidationError:h,clearFieldError:u,isEditing:s!==null}}function Ie({content:a,className:l=""}){const s=x=>x.replace(/^(\d+)\.\./gm,"$1.").replace(/^[-*]\.\./gm,"-").replace(/^(\d+)\.\s*\./gm,"$1.").replace(/^[-*]\s*\./gm,"-").trim(),n=i.useMemo(()=>{if(!a)return"";const x=s(a),p="text-[var(--text-muted)] mb-2.5 leading-[1.7]",m=p.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return x.replace(/^### (.*$)/gim,(o,t)=>`<h3 id="${t.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-")}" class="text-lg font-semibold text-[var(--text)] mt-5 mb-2 scroll-mt-20">${t}</h3>`).replace(/^## (.*$)/gim,(o,t)=>`<h2 id="${t.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-")}" class="text-xl font-semibold text-[var(--text)] mt-7 mb-2.5 scroll-mt-20">${t}</h2>`).replace(/^# (.*$)/gim,(o,t)=>`<h1 id="${t.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-")}" class="text-2xl font-bold text-[var(--text)] mt-8 mb-3 scroll-mt-20">${t}</h1>`).replace(/\*\*(.*?)\*\*/g,'<strong class="font-semibold text-[var(--text)]">$1</strong>').replace(/\*(.*?)\*/g,'<em class="italic text-[var(--text-muted)]">$1</em>').replace(/```([^`]+)```/g,'<pre class="bg-[var(--surface)] p-4 rounded-[var(--radius-md)] my-6 overflow-x-auto border border-[var(--border)]"><code class="text-[var(--text-muted)] font-mono text-[length:var(--font-100)]">$1</code></pre>').replace(/`([^`]+)`/g,'<code class="bg-[var(--surface-strong)] px-2 py-1 rounded text-accent text-[length:var(--font-100)] font-mono">$1</code>').replace(/^(\d+)\.\s*(.+)$/gim,'<li class="text-[var(--text-muted)] ml-6">$1. $2</li>').replace(/^[-*]\s+(.+)$/gim,'<li class="text-[var(--text-muted)] ml-6 relative"><span class="absolute -left-3 w-2 h-2 bg-accent rounded-full top-2"></span>$1</li>').replace(/^> (.*$)/gim,'<blockquote class="border-l-4 border-accent pl-6 italic text-[var(--text-muted)] my-6 bg-[var(--surface)] py-4 rounded-r-[var(--radius-md)]">$1</blockquote>').replace(/\[([^\]]+)\]\(([^)]+)\)/g,'<a href="$2" class="text-accent hover:text-[var(--text)] underline underline-offset-2 transition-colors" target="_blank" rel="noopener noreferrer">$1</a>').replace(/!\[([^\]]*)\]\(([^)]+)\)/g,'<img src="$2" alt="$1" class="max-w-full h-auto rounded-[var(--radius-md)] my-6 shadow-lg border border-[var(--border)]" />').replace(/\n\n/g,`</p><p class="${p}">`).replace(/\n/g,"<br>").replace(/^(?!<[h|p|b|u|l|i|d])/gm,`<p class="${p}">`).replace(new RegExp("(?<!>)$","gm"),"</p>").replace(new RegExp(`<p class="${m}"></p>`,"g"),"").replace(new RegExp(`<p class="${m}"><br></p>`,"g"),"").replace(new RegExp(`<p class="${m}">(<li[^>]*>.*</li>)</p>`,"g"),"$1").replace(/(<li[^>]*>.*<\/li>)(\s*<li[^>]*>.*<\/li>)+/g,o=>{const g=o.includes("1.")||o.includes("2.")||o.includes("3.")?"ol":"ul";return`<${g} class="my-4 space-y-1">${o}</${g}>`})},[a]);return e.jsx("div",{className:`prose prose-invert max-w-none ${l}`,dangerouslySetInnerHTML:{__html:n}})}function Le({value:a,onChange:l,placeholder:s="Write your content here...",className:n="",rows:x=12,onImageUpload:p}){const{t:m}=H(),[o,t]=i.useState(!1),[g,v]=i.useState(!1),[h,u]=i.useState(!1),[r,f]=i.useState(14),b=i.useRef(null),T=()=>{f(d=>Math.min(d+2,24))},I=()=>{f(d=>Math.max(d-2,10))},z=()=>{f(14)},w=(d,j="",$="")=>{const N=b.current;if(!N)return;const L=N.selectionStart,C=N.selectionEnd,V=a.substring(L,C)||$,D=a.substring(0,L)+d+V+j+a.substring(C);l(D),setTimeout(()=>{const c=L+d.length+V.length;N.setSelectionRange(c,c),N.focus()},0)},A=d=>{const j=b.current;if(!j)return;const $=j.selectionStart,N=a.substring(0,$).lastIndexOf(`
`)+1,L=a.substring(0,N)+d+a.substring(N);l(L),setTimeout(()=>{const C=$+d.length;j.setSelectionRange(C,C),j.focus()},0)},P=[{icon:ge,label:"Bold",action:()=>w("**","**","bold text"),shortcut:"Ctrl+B"},{icon:ye,label:"Italic",action:()=>w("*","*","italic text"),shortcut:"Ctrl+I"},{icon:fe,label:"Heading",action:()=>A("## "),shortcut:"Ctrl+H"},{icon:ke,label:"Bullet List",action:()=>A("- "),shortcut:"Ctrl+Shift+8"},{icon:Ne,label:"Numbered List",action:()=>A("1. "),shortcut:"Ctrl+Shift+7"},{icon:Ce,label:"Quote",action:()=>A("> "),shortcut:"Ctrl+Shift+>"},{icon:ve,label:"Code Block",action:()=>w("```\n","\n```","code here"),shortcut:"Ctrl+Shift+`"},{icon:je,label:"Link",action:()=>w("[","](url)","link text"),shortcut:"Ctrl+K"},{icon:be,label:"Image",action:()=>w("![","](image-url)","alt text"),shortcut:"Ctrl+Shift+I"}],y=d=>{if(d.ctrlKey||d.metaKey)switch(d.key){case"b":d.preventDefault(),w("**","**","bold text");break;case"i":d.preventDefault(),w("*","*","italic text");break;case"h":d.preventDefault(),A("## ");break;case"k":d.preventDefault(),w("[","](url)","link text");break;case"=":case"+":d.preventDefault(),T();break;case"-":d.preventDefault(),I();break;case"0":d.preventDefault(),z();break}},S=d=>{l(d)},_=()=>{const d=P.map(N=>`${N.label}: ${N.shortcut}`).join(`
`),j=["Increase Text Size: Ctrl+=","Decrease Text Size: Ctrl+-","Reset Text Size: Ctrl+0"].join(`
`),$=d+`

`+j;navigator.clipboard.writeText($),u(!0),setTimeout(()=>u(!1),2e3)},U=e.jsxs("div",{className:`flex gap-[var(--space-16)] h-full ${g?"fixed inset-0 z-50 p-[var(--space-16)] bg-[var(--bg)]":""}`,children:[e.jsx("div",{className:`flex flex-col flex-1 ${g?"h-full":""}`,children:e.jsx("textarea",{ref:b,value:a,onChange:d=>S(d.target.value),onKeyDown:y,placeholder:s,rows:x,style:{fontSize:`${r}px`},className:"w-full flex-1 field resize-none font-mono"})}),e.jsx("div",{className:"flex-1 overflow-auto rounded-[var(--radius-md)] bg-[var(--surface)] border border-[var(--border)] p-[var(--space-16)]",children:e.jsx("div",{className:"prose prose-invert max-w-none",style:{fontSize:`${r}px`},children:e.jsx(Ie,{content:a})})})]});return e.jsxs("div",{className:`stack [--stack-space:var(--space-12)] ${n}`,children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-[var(--space-8)] p-[var(--space-12)] bg-[var(--surface)] rounded-[var(--radius-md)] border border-[var(--border)]",children:[e.jsx("div",{className:"flex items-center gap-[var(--space-4)]",children:P.map((d,j)=>{const $=d.icon;return e.jsx("button",{type:"button",onClick:d.action,className:"p-[var(--space-8)] text-[var(--text-muted)] hover:text-[var(--text)] hover:bg-[var(--surface-strong)] rounded-[var(--radius-sm)] transition-colors",title:`${d.label} (${d.shortcut})`,children:e.jsx($,{className:"h-[var(--space-16)] w-[var(--space-16)]"})},j)})}),e.jsx("div",{className:"h-[var(--space-16)] w-px bg-[var(--border)] mx-[var(--space-8)]"}),e.jsxs("div",{className:"flex items-center gap-[var(--space-4)]",children:[e.jsx("button",{type:"button",onClick:I,className:"p-[var(--space-8)] text-[var(--text-muted)] hover:text-[var(--text)] hover:bg-[var(--surface-strong)] rounded-[var(--radius-sm)] transition-colors",title:m("admin.markdown.decreaseTextSize"),disabled:r<=10,children:e.jsx($e,{className:"h-[var(--space-16)] w-[var(--space-16)]"})}),e.jsxs("span",{className:"text-[length:var(--font-100)] text-[var(--text-muted)] px-[var(--space-8)] py-[var(--space-4)] bg-[var(--surface-strong)] rounded-[var(--radius-sm)] min-w-[3rem] text-center",children:[r,"px"]}),e.jsx("button",{type:"button",onClick:T,className:"p-[var(--space-8)] text-[var(--text-muted)] hover:text-[var(--text)] hover:bg-[var(--surface-strong)] rounded-[var(--radius-sm)] transition-colors",title:m("admin.markdown.increaseTextSize"),disabled:r>=24,children:e.jsx(Te,{className:"h-[var(--space-16)] w-[var(--space-16)]"})}),e.jsx("button",{type:"button",onClick:z,className:"p-[var(--space-8)] text-[var(--text-muted)] hover:text-[var(--text)] hover:bg-[var(--surface-strong)] rounded-[var(--radius-sm)] transition-colors",title:"Reset Text Size (Ctrl+0)",children:e.jsx(Ee,{className:"h-[var(--space-16)] w-[var(--space-16)]"})})]}),e.jsx("div",{className:"h-[var(--space-16)] w-px bg-[var(--border)] mx-[var(--space-8)]"}),e.jsx("button",{type:"button",onClick:()=>t(!o),className:`p-2 rounded transition-colors ${o?"text-accent bg-accent/10":"text-[var(--text-muted)] hover:text-[var(--text)] hover:bg-[var(--surface-strong)]"}`,title:m("admin.markdown.togglePreview"),children:o?e.jsx(ee,{className:"h-[var(--space-16)] w-[var(--space-16)]"}):e.jsx(W,{className:"h-[var(--space-16)] w-[var(--space-16)]"})}),o&&e.jsx("button",{type:"button",onClick:()=>v(!g),className:"p-[var(--space-8)] text-[var(--text-muted)] hover:text-[var(--text)] hover:bg-[var(--surface-strong)] rounded-[var(--radius-sm)] transition-colors",title:m("admin.markdown.toggleFullscreen"),children:g?e.jsx(Se,{className:"h-[var(--space-16)] w-[var(--space-16)]"}):e.jsx(we,{className:"h-[var(--space-16)] w-[var(--space-16)]"})}),e.jsx("div",{className:"ml-auto flex items-center gap-[var(--space-4)]",children:e.jsx("button",{type:"button",onClick:_,className:"p-[var(--space-8)] text-[var(--text-muted)] hover:text-[var(--text)] hover:bg-[var(--surface-strong)] rounded-[var(--radius-sm)] transition-colors text-[length:var(--font-100)]",title:m("admin.markdown.copyShortcuts"),children:h?e.jsx(re,{className:"h-[var(--space-16)] w-[var(--space-16)] text-green-400"}):e.jsx(ne,{className:"h-[var(--space-16)] w-[var(--space-16)]"})})})]}),o?U:e.jsx("textarea",{ref:b,value:a,onChange:d=>S(d.target.value),onKeyDown:y,placeholder:s,rows:x,style:{fontSize:`${r}px`},className:"w-full field resize-vertical font-mono"}),e.jsxs("div",{className:"text-[length:var(--font-100)] text-[var(--text-muted)] stack [--stack-space:var(--space-4)]",children:[e.jsx("p",{children:e.jsx("strong",{children:m("admin.markdown.help.keyboardShortcuts")})}),e.jsx("p",{children:e.jsx("strong",{children:m("admin.markdown.help.textSize")})}),e.jsx("p",{children:e.jsx("strong",{children:m("admin.markdown.help.markdownSyntax")})}),p&&e.jsx("p",{children:e.jsx("strong",{children:m("admin.markdown.help.imageUpload")})})]}),g&&e.jsx("button",{type:"button",onClick:()=>v(!1),className:"fixed bottom-[var(--space-16)] right-[var(--space-16)] btn btn-primary z-50",children:"Exit Fullscreen"})]})}var F={exports:{}},Pe=F.exports,Q;function Re(){return Q||(Q=1,(function(a,l){(function(s,n,x){a.exports=x(),a.exports.default=x()})("slugify",Pe,function(){var s=JSON.parse(`{"$":"dollar","%":"percent","&":"and","<":"less",">":"greater","|":"or","¢":"cent","£":"pound","¤":"currency","¥":"yen","©":"(c)","ª":"a","®":"(r)","º":"o","À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","Æ":"AE","Ç":"C","È":"E","É":"E","Ê":"E","Ë":"E","Ì":"I","Í":"I","Î":"I","Ï":"I","Ð":"D","Ñ":"N","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","Ù":"U","Ú":"U","Û":"U","Ü":"U","Ý":"Y","Þ":"TH","ß":"ss","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","æ":"ae","ç":"c","è":"e","é":"e","ê":"e","ë":"e","ì":"i","í":"i","î":"i","ï":"i","ð":"d","ñ":"n","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","ù":"u","ú":"u","û":"u","ü":"u","ý":"y","þ":"th","ÿ":"y","Ā":"A","ā":"a","Ă":"A","ă":"a","Ą":"A","ą":"a","Ć":"C","ć":"c","Č":"C","č":"c","Ď":"D","ď":"d","Đ":"DJ","đ":"dj","Ē":"E","ē":"e","Ė":"E","ė":"e","Ę":"e","ę":"e","Ě":"E","ě":"e","Ğ":"G","ğ":"g","Ģ":"G","ģ":"g","Ĩ":"I","ĩ":"i","Ī":"i","ī":"i","Į":"I","į":"i","İ":"I","ı":"i","Ķ":"k","ķ":"k","Ļ":"L","ļ":"l","Ľ":"L","ľ":"l","Ł":"L","ł":"l","Ń":"N","ń":"n","Ņ":"N","ņ":"n","Ň":"N","ň":"n","Ō":"O","ō":"o","Ő":"O","ő":"o","Œ":"OE","œ":"oe","Ŕ":"R","ŕ":"r","Ř":"R","ř":"r","Ś":"S","ś":"s","Ş":"S","ş":"s","Š":"S","š":"s","Ţ":"T","ţ":"t","Ť":"T","ť":"t","Ũ":"U","ũ":"u","Ū":"u","ū":"u","Ů":"U","ů":"u","Ű":"U","ű":"u","Ų":"U","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","ź":"z","Ż":"Z","ż":"z","Ž":"Z","ž":"z","Ə":"E","ƒ":"f","Ơ":"O","ơ":"o","Ư":"U","ư":"u","ǈ":"LJ","ǉ":"lj","ǋ":"NJ","ǌ":"nj","Ș":"S","ș":"s","Ț":"T","ț":"t","ə":"e","˚":"o","Ά":"A","Έ":"E","Ή":"H","Ί":"I","Ό":"O","Ύ":"Y","Ώ":"W","ΐ":"i","Α":"A","Β":"B","Γ":"G","Δ":"D","Ε":"E","Ζ":"Z","Η":"H","Θ":"8","Ι":"I","Κ":"K","Λ":"L","Μ":"M","Ν":"N","Ξ":"3","Ο":"O","Π":"P","Ρ":"R","Σ":"S","Τ":"T","Υ":"Y","Φ":"F","Χ":"X","Ψ":"PS","Ω":"W","Ϊ":"I","Ϋ":"Y","ά":"a","έ":"e","ή":"h","ί":"i","ΰ":"y","α":"a","β":"b","γ":"g","δ":"d","ε":"e","ζ":"z","η":"h","θ":"8","ι":"i","κ":"k","λ":"l","μ":"m","ν":"n","ξ":"3","ο":"o","π":"p","ρ":"r","ς":"s","σ":"s","τ":"t","υ":"y","φ":"f","χ":"x","ψ":"ps","ω":"w","ϊ":"i","ϋ":"y","ό":"o","ύ":"y","ώ":"w","Ё":"Yo","Ђ":"DJ","Є":"Ye","І":"I","Ї":"Yi","Ј":"J","Љ":"LJ","Њ":"NJ","Ћ":"C","Џ":"DZ","А":"A","Б":"B","В":"V","Г":"G","Д":"D","Е":"E","Ж":"Zh","З":"Z","И":"I","Й":"J","К":"K","Л":"L","М":"M","Н":"N","О":"O","П":"P","Р":"R","С":"S","Т":"T","У":"U","Ф":"F","Х":"H","Ц":"C","Ч":"Ch","Ш":"Sh","Щ":"Sh","Ъ":"U","Ы":"Y","Ь":"","Э":"E","Ю":"Yu","Я":"Ya","а":"a","б":"b","в":"v","г":"g","д":"d","е":"e","ж":"zh","з":"z","и":"i","й":"j","к":"k","л":"l","м":"m","н":"n","о":"o","п":"p","р":"r","с":"s","т":"t","у":"u","ф":"f","х":"h","ц":"c","ч":"ch","ш":"sh","щ":"sh","ъ":"u","ы":"y","ь":"","э":"e","ю":"yu","я":"ya","ё":"yo","ђ":"dj","є":"ye","і":"i","ї":"yi","ј":"j","љ":"lj","њ":"nj","ћ":"c","ѝ":"u","џ":"dz","Ґ":"G","ґ":"g","Ғ":"GH","ғ":"gh","Қ":"KH","қ":"kh","Ң":"NG","ң":"ng","Ү":"UE","ү":"ue","Ұ":"U","ұ":"u","Һ":"H","һ":"h","Ә":"AE","ә":"ae","Ө":"OE","ө":"oe","Ա":"A","Բ":"B","Գ":"G","Դ":"D","Ե":"E","Զ":"Z","Է":"E'","Ը":"Y'","Թ":"T'","Ժ":"JH","Ի":"I","Լ":"L","Խ":"X","Ծ":"C'","Կ":"K","Հ":"H","Ձ":"D'","Ղ":"GH","Ճ":"TW","Մ":"M","Յ":"Y","Ն":"N","Շ":"SH","Չ":"CH","Պ":"P","Ջ":"J","Ռ":"R'","Ս":"S","Վ":"V","Տ":"T","Ր":"R","Ց":"C","Փ":"P'","Ք":"Q'","Օ":"O''","Ֆ":"F","և":"EV","ء":"a","آ":"aa","أ":"a","ؤ":"u","إ":"i","ئ":"e","ا":"a","ب":"b","ة":"h","ت":"t","ث":"th","ج":"j","ح":"h","خ":"kh","د":"d","ذ":"th","ر":"r","ز":"z","س":"s","ش":"sh","ص":"s","ض":"dh","ط":"t","ظ":"z","ع":"a","غ":"gh","ف":"f","ق":"q","ك":"k","ل":"l","م":"m","ن":"n","ه":"h","و":"w","ى":"a","ي":"y","ً":"an","ٌ":"on","ٍ":"en","َ":"a","ُ":"u","ِ":"e","ْ":"","٠":"0","١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9","پ":"p","چ":"ch","ژ":"zh","ک":"k","گ":"g","ی":"y","۰":"0","۱":"1","۲":"2","۳":"3","۴":"4","۵":"5","۶":"6","۷":"7","۸":"8","۹":"9","฿":"baht","ა":"a","ბ":"b","გ":"g","დ":"d","ე":"e","ვ":"v","ზ":"z","თ":"t","ი":"i","კ":"k","ლ":"l","მ":"m","ნ":"n","ო":"o","პ":"p","ჟ":"zh","რ":"r","ს":"s","ტ":"t","უ":"u","ფ":"f","ქ":"k","ღ":"gh","ყ":"q","შ":"sh","ჩ":"ch","ც":"ts","ძ":"dz","წ":"ts","ჭ":"ch","ხ":"kh","ჯ":"j","ჰ":"h","Ṣ":"S","ṣ":"s","Ẁ":"W","ẁ":"w","Ẃ":"W","ẃ":"w","Ẅ":"W","ẅ":"w","ẞ":"SS","Ạ":"A","ạ":"a","Ả":"A","ả":"a","Ấ":"A","ấ":"a","Ầ":"A","ầ":"a","Ẩ":"A","ẩ":"a","Ẫ":"A","ẫ":"a","Ậ":"A","ậ":"a","Ắ":"A","ắ":"a","Ằ":"A","ằ":"a","Ẳ":"A","ẳ":"a","Ẵ":"A","ẵ":"a","Ặ":"A","ặ":"a","Ẹ":"E","ẹ":"e","Ẻ":"E","ẻ":"e","Ẽ":"E","ẽ":"e","Ế":"E","ế":"e","Ề":"E","ề":"e","Ể":"E","ể":"e","Ễ":"E","ễ":"e","Ệ":"E","ệ":"e","Ỉ":"I","ỉ":"i","Ị":"I","ị":"i","Ọ":"O","ọ":"o","Ỏ":"O","ỏ":"o","Ố":"O","ố":"o","Ồ":"O","ồ":"o","Ổ":"O","ổ":"o","Ỗ":"O","ỗ":"o","Ộ":"O","ộ":"o","Ớ":"O","ớ":"o","Ờ":"O","ờ":"o","Ở":"O","ở":"o","Ỡ":"O","ỡ":"o","Ợ":"O","ợ":"o","Ụ":"U","ụ":"u","Ủ":"U","ủ":"u","Ứ":"U","ứ":"u","Ừ":"U","ừ":"u","Ử":"U","ử":"u","Ữ":"U","ữ":"u","Ự":"U","ự":"u","Ỳ":"Y","ỳ":"y","Ỵ":"Y","ỵ":"y","Ỷ":"Y","ỷ":"y","Ỹ":"Y","ỹ":"y","–":"-","‘":"'","’":"'","“":"\\"","”":"\\"","„":"\\"","†":"+","•":"*","…":"...","₠":"ecu","₢":"cruzeiro","₣":"french franc","₤":"lira","₥":"mill","₦":"naira","₧":"peseta","₨":"rupee","₩":"won","₪":"new shequel","₫":"dong","€":"euro","₭":"kip","₮":"tugrik","₯":"drachma","₰":"penny","₱":"peso","₲":"guarani","₳":"austral","₴":"hryvnia","₵":"cedi","₸":"kazakhstani tenge","₹":"indian rupee","₺":"turkish lira","₽":"russian ruble","₿":"bitcoin","℠":"sm","™":"tm","∂":"d","∆":"delta","∑":"sum","∞":"infinity","♥":"love","元":"yuan","円":"yen","﷼":"rial","ﻵ":"laa","ﻷ":"laa","ﻹ":"lai","ﻻ":"la"}`),n=JSON.parse('{"bg":{"Й":"Y","Ц":"Ts","Щ":"Sht","Ъ":"A","Ь":"Y","й":"y","ц":"ts","щ":"sht","ъ":"a","ь":"y"},"de":{"Ä":"AE","ä":"ae","Ö":"OE","ö":"oe","Ü":"UE","ü":"ue","ß":"ss","%":"prozent","&":"und","|":"oder","∑":"summe","∞":"unendlich","♥":"liebe"},"es":{"%":"por ciento","&":"y","<":"menor que",">":"mayor que","|":"o","¢":"centavos","£":"libras","¤":"moneda","₣":"francos","∑":"suma","∞":"infinito","♥":"amor"},"fr":{"%":"pourcent","&":"et","<":"plus petit",">":"plus grand","|":"ou","¢":"centime","£":"livre","¤":"devise","₣":"franc","∑":"somme","∞":"infini","♥":"amour"},"pt":{"%":"porcento","&":"e","<":"menor",">":"maior","|":"ou","¢":"centavo","∑":"soma","£":"libra","∞":"infinito","♥":"amor"},"uk":{"И":"Y","и":"y","Й":"Y","й":"y","Ц":"Ts","ц":"ts","Х":"Kh","х":"kh","Щ":"Shch","щ":"shch","Г":"H","г":"h"},"vi":{"Đ":"D","đ":"d"},"da":{"Ø":"OE","ø":"oe","Å":"AA","å":"aa","%":"procent","&":"og","|":"eller","$":"dollar","<":"mindre end",">":"større end"},"nb":{"&":"og","Å":"AA","Æ":"AE","Ø":"OE","å":"aa","æ":"ae","ø":"oe"},"it":{"&":"e"},"nl":{"&":"en"},"sv":{"&":"och","Å":"AA","Ä":"AE","Ö":"OE","å":"aa","ä":"ae","ö":"oe"}}');function x(p,m){if(typeof p!="string")throw new Error("slugify: string argument expected");m=typeof m=="string"?{replacement:m}:m||{};var o=n[m.locale]||{},t=m.replacement===void 0?"-":m.replacement,g=m.trim===void 0?!0:m.trim,v=p.normalize().split("").reduce(function(h,u){var r=o[u];return r===void 0&&(r=s[u]),r===void 0&&(r=u),r===t&&(r=" "),h+r.replace(m.remove||/[^\w\s$*_+~.()'"!\-:@]+/g,"")},"");return m.strict&&(v=v.replace(/[^A-Za-z0-9\s]/g,"")),g&&(v=v.trim()),v=v.replace(/\s+/g,t),m.lower&&(v=v.toLowerCase()),v}return x.extend=function(p){Object.assign(s,p)},x})})(F)),F.exports}var Ue=Re();const Me=le(Ue);function Ve(a){if(!a)return"1 min read";try{const l=a.trim().split(/\s+/).filter(x=>x.length>0).length;return`${Math.ceil(l/200)} min read`}catch(l){return console.error("Error calculating reading time:",l),"1 min read"}}function qe(a){return a?Me(a,{lower:!0,strict:!0,trim:!0}):""}async function se(a,l){try{if(!a||a.length===0||!/^[a-z0-9]+(?:-[a-z0-9]+)*$/.test(a))return!1;const n=ce.from("blog_posts").select("id").eq("slug",a),{data:x,error:p}=await n;return p?(console.error("Error checking slug uniqueness:",p),!1):!x||x.length===0?!0:l&&x.length===1?x[0].id===l:!1}catch(s){return console.error("Error validating slug:",s),!1}}function Fe(a){return a?a.replace(/\r\n/g,`
`).replace(/^[\s]*[•·−–—]\s+/gm,"- ").split(`
`).map(l=>l.startsWith("```")||l.startsWith("    ")?l:l.replace(/  +/g," ")).join(`
`).replace(/^(#+)([^\s#])/gm,"$1 $2").split(`
`).map(l=>l.trimEnd()).join(`
`).replace(/\n\n\n+/g,`

`).trim():""}function _e(){return{calculateReadingTime:Ve,generateSlug:qe,validateSlugUniqueness:se,normalizeMarkdown:Fe}}const De=5e3,Ke="blog_draft_";function Ye(){const a=i.useRef(),[l,s]=i.useState({}),n=i.useCallback(h=>`${Ke}${h||"new"}`,[]),x=i.useCallback(h=>{const u=n(h),r=l[u];return r?new Date(r).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):null},[n,l]),p=i.useCallback((h,u)=>{a.current&&clearTimeout(a.current),a.current=setTimeout(()=>{try{const r=n(h);localStorage.setItem(r,JSON.stringify(u)),s(f=>({...f,[r]:Date.now()}))}catch(r){console.error("Error autosaving draft:",r)}},De)},[n]),m=i.useCallback(h=>{try{const u=n(h),r=localStorage.getItem(u);return r?JSON.parse(r):null}catch(u){return console.error("Error restoring draft:",u),null}},[n]),o=i.useCallback(h=>{try{const u=n(h);localStorage.removeItem(u),s(r=>{const f={...r};return delete f[u],f})}catch(u){console.error("Error clearing draft:",u)}},[n]),t=i.useCallback(h=>{try{const u=n(h);return localStorage.getItem(u)!==null}catch{return!1}},[n]),g=i.useCallback(h=>{try{const u=n(h),r=localStorage.getItem(u);return r&&JSON.parse(r)._draftTimestamp||null}catch{return null}},[n]),v=i.useCallback(async(h,u)=>se(h,u),[]);return{autosaveDraft:p,restoreDraft:m,clearDraft:o,checkSlugUniqueness:v,getDraftKey:n,getLastSavedTime:x,hasDraft:t,getDraftTimestamp:g}}function He({isEditing:a,editingPostId:l,formData:s,errors:n,onSubmit:x,onChange:p,onCancel:m,isSubmitting:o=!1}){const{t}=H(),{generateSlug:g,calculateReadingTime:v,validateSlugUniqueness:h}=_e(),{autosaveDraft:u,clearDraft:r,getLastSavedTime:f}=Ye(),[b,T]=i.useState({isValid:null,isChecking:!1,message:null}),[I,z]=i.useState("idle"),[w,A]=i.useState(null),[P,y]=i.useState(0),[S,_]=i.useState(0),[U,d]=i.useState("1 min read"),[j,$]=i.useState(!1);i.useEffect(()=>{const c=s.content||"",E=c.trim().split(/\s+/).filter(K=>K.length>0).length,R=c.length;y(E),_(R);const q=v(c);d(q)},[s.content,v]),i.useEffect(()=>{const c=setTimeout(()=>{try{z("saving"),u(l||null,s),z("saved"),A(f(l||null)),setTimeout(()=>z("idle"),2e3)}catch(E){console.error("Autosave error:",E),z("error")}},3e3);return()=>clearTimeout(c)},[s,l,u,f]);const N=i.useCallback(async c=>{if(!c){T({isValid:!1,isChecking:!1,message:t("admin.blog.slugRequired")});return}if(!/^[a-z0-9]+(?:-[a-z0-9]+)*$/.test(c)){T({isValid:!1,isChecking:!1,message:t("admin.blog.slugFormatError")});return}T({isValid:null,isChecking:!0,message:null});try{const R=await h(c,l);T({isValid:R,isChecking:!1,message:t(R?"admin.blog.slugAvailable":"admin.blog.slugExists")})}catch{T({isValid:null,isChecking:!1,message:t("admin.blog.slugValidationError")})}},[l,h,t]);i.useEffect(()=>{const c=setTimeout(()=>{s.slug&&s.slug.length>0&&N(s.slug)},500);return()=>clearTimeout(c)},[s.slug,N]);const L=c=>{const E=g(c);p({...s,title:c,slug:E})},C=(c,E)=>{p({...s,[c]:E})},Z=(c,E)=>{const R=`![${E}](${c})`,q=s.content||"",K=q+(q?`

`:"")+R;p({...s,image:c,content:K})},V=c=>{C("image",c)},D=async c=>{c.preventDefault();try{j||p({...s,read_time:U}),await x(c),r(l||null)}catch(E){console.error("Form submission error:",E)}};return e.jsxs("form",{onSubmit:D,className:"stack [--stack-space:var(--space-24)]",children:[e.jsxs("div",{className:"flex items-center justify-between pb-4 border-b border-[var(--border)]",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-accent/10 text-accent",children:e.jsx(M,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-[length:var(--font-500)] font-semibold text-[var(--text)]",children:t(a?"admin.blog.editPostTitle":"admin.blog.createPostTitle")}),e.jsx("p",{className:"text-[length:var(--font-100)] text-[var(--text-muted)]",children:t(a?"admin.blog.editPostSubtitle":"admin.blog.createPostSubtitle")})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[I==="saving"&&e.jsxs("div",{className:"flex items-center gap-1 text-[length:var(--font-100)] text-yellow-400",children:[e.jsx(ie,{className:"h-3 w-3 animate-pulse"}),t("admin.blog.saving")]}),I==="saved"&&e.jsxs("div",{className:"flex items-center gap-1 text-[length:var(--font-100)] text-green-400",children:[e.jsx(B,{className:"h-3 w-3"}),t("admin.blog.saved"),w&&`${t("admin.blog.savedAt")}${w}`]})]})]}),e.jsxs("div",{className:"bg-[var(--surface)] rounded-[var(--radius-md)] p-[var(--space-24)] border border-[var(--border)]",children:[e.jsxs("h3",{className:"text-[length:var(--font-400)] font-semibold text-[var(--text)] mb-[var(--space-16)] flex items-center gap-2",children:[e.jsx(M,{className:"h-5 w-5 text-accent"}),t("admin.blog.basicInformation")]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"form-label",children:t("admin.blog.titleLabel")}),e.jsx("input",{type:"text",value:s.title||"",onChange:c=>L(c.target.value),className:`field ${n.title?"border-red-500":"border-[var(--border)]"}`,placeholder:t("admin.blog.titlePlaceholder"),required:!0,disabled:o}),n.title&&e.jsxs("p",{className:"text-red-400 text-sm flex items-center gap-1",children:[e.jsx("span",{className:"w-1 h-1 bg-red-400 rounded-full"}),n.title]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"form-label",children:t("admin.blog.slugLabel")}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-[var(--space-12)] flex items-center pointer-events-none",children:e.jsx(te,{className:"h-[var(--space-16)] w-[var(--space-16)] text-[var(--text-muted)]"})}),e.jsx("input",{type:"text",value:s.slug||"",onChange:c=>C("slug",c.target.value),className:`field pl-[var(--space-32)] pr-[var(--space-32)] ${n.slug?"border-red-500":b.isValid===!0?"border-green-500":b.isValid===!1&&b.isChecking===!1?"border-red-500":"border-[var(--border)]"}`,placeholder:t("admin.blog.slugPlaceholder"),required:!0,disabled:o}),e.jsxs("div",{className:"absolute inset-y-0 right-0 pr-[var(--space-12)] flex items-center pointer-events-none",children:[b.isChecking&&e.jsx("div",{className:"animate-spin",children:e.jsx(Y,{className:"h-[var(--space-16)] w-[var(--space-16)] text-[var(--text-muted)]"})}),b.isValid===!0&&e.jsx(B,{className:"h-[var(--space-16)] w-[var(--space-16)] text-green-400"}),b.isValid===!1&&e.jsx(pe,{className:"h-[var(--space-16)] w-[var(--space-16)] text-red-400"})]})]}),b.message&&e.jsxs("p",{className:`text-[length:var(--font-100)] flex items-center gap-[var(--space-4)] ${b.isValid===!0?"text-green-400":"text-red-400"}`,children:[e.jsx("span",{className:"w-[var(--space-4)] h-[var(--space-4)] bg-current rounded-full"}),b.message]}),n.slug&&e.jsxs("p",{className:"text-red-400 text-[length:var(--font-100)] flex items-center gap-[var(--space-4)]",children:[e.jsx("span",{className:"w-[var(--space-4)] h-[var(--space-4)] bg-red-400 rounded-full"}),n.slug]})]})]}),e.jsxs("div",{className:"mt-6 space-y-2",children:[e.jsx("label",{className:"form-label",children:t("admin.blog.excerptLabel")}),e.jsx("textarea",{value:s.excerpt||"",onChange:c=>C("excerpt",c.target.value),rows:3,className:`field resize-none ${n.excerpt?"border-red-500":"border-[var(--border)]"}`,placeholder:t("admin.blog.excerptPlaceholder"),required:!0,disabled:o}),n.excerpt&&e.jsxs("p",{className:"text-red-400 text-[length:var(--font-100)] flex items-center gap-[var(--space-4)]",children:[e.jsx("span",{className:"w-[var(--space-4)] h-[var(--space-4)] bg-red-400 rounded-full"}),n.excerpt]})]})]}),e.jsxs("div",{className:"bg-[var(--surface)] rounded-[var(--radius-md)] p-[var(--space-24)] border border-[var(--border)]",children:[e.jsxs("h3",{className:"text-[length:var(--font-400)] font-semibold text-[var(--text)] mb-[var(--space-16)] flex items-center gap-2",children:[e.jsx(M,{className:"h-5 w-5 text-accent"}),t("admin.blog.contentSectionTitle")]}),e.jsx(Le,{value:s.content||"",onChange:c=>C("content",c),placeholder:t("admin.blog.contentPlaceholder"),rows:10,onImageUpload:Z}),e.jsxs("div",{className:"mt-[var(--space-16)] flex items-center justify-between text-[length:var(--font-100)] text-[var(--text-muted)] p-[var(--space-12)] bg-[var(--surface)] rounded-[var(--radius-md)] border border-[var(--border)]",children:[e.jsxs("div",{className:"flex gap-[var(--space-24)]",children:[e.jsxs("span",{children:[t("admin.blog.words")," ",e.jsx("span",{className:"text-[var(--text)] font-medium",children:P})]}),e.jsxs("span",{children:[t("admin.blog.characters")," ",e.jsx("span",{className:"text-[var(--text)] font-medium",children:S})]})]}),e.jsxs("div",{className:"text-accent font-medium",children:[t("admin.blog.readingTime")," ",U]})]}),n.content&&e.jsxs("p",{className:"text-red-400 text-[length:var(--font-100)] flex items-center gap-[var(--space-4)] mt-[var(--space-8)]",children:[e.jsx("span",{className:"w-[var(--space-4)] h-[var(--space-4)] bg-red-400 rounded-full"}),n.content]})]}),e.jsxs("div",{className:"bg-[var(--surface)] rounded-[var(--radius-md)] p-[var(--space-24)] border border-[var(--border)]",children:[e.jsxs("h3",{className:"text-[length:var(--font-400)] font-semibold text-[var(--text)] mb-[var(--space-16)] flex items-center gap-2",children:[e.jsx(M,{className:"h-5 w-5 text-accent"}),t("admin.blog.mediaSettingsSectionTitle")]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"form-label",children:t("admin.blog.featuredImage")}),e.jsx(xe,{onUpload:V,disabled:o})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"form-label",children:t("admin.blog.readTimeLabel")}),e.jsx("button",{type:"button",onClick:()=>$(!j),className:"text-[length:var(--font-100)] px-[var(--space-8)] py-[var(--space-4)] rounded-[var(--radius-sm)] bg-[var(--surface-strong)] text-[var(--text-muted)] hover:bg-[var(--surface)] transition-colors",children:t(j?"admin.blog.readTimeUsingCustom":"admin.blog.readTimeAutoOverride")})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-[var(--space-12)] flex items-center pointer-events-none",children:e.jsx(Y,{className:"h-[var(--space-16)] w-[var(--space-16)] text-[var(--text-muted)]"})}),e.jsx("input",{type:"text",value:j?s.read_time||"":U,onChange:c=>{$(!0),C("read_time",c.target.value)},className:`field pl-[var(--space-32)] pr-[var(--space-16)] ${n.read_time?"border-red-500":"border-[var(--border)]"}`,placeholder:t("admin.blog.readTimePlaceholder"),required:!0,disabled:o})]}),n.read_time&&e.jsxs("p",{className:"text-red-400 text-[length:var(--font-100)] flex items-center gap-[var(--space-4)]",children:[e.jsx("span",{className:"w-[var(--space-4)] h-[var(--space-4)] bg-red-400 rounded-full"}),n.read_time]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"form-label",children:t("admin.blog.publicationStatusLabel")}),e.jsxs("div",{className:"flex items-center gap-[var(--space-12)] p-[var(--space-12)] rounded-[var(--radius-md)] bg-[var(--surface)] border border-[var(--border)]",children:[e.jsx("input",{type:"checkbox",id:"published",checked:s.published||!1,onChange:c=>C("published",c.target.checked),className:"w-[var(--space-16)] h-[var(--space-16)] text-accent bg-[var(--surface)] border-[var(--border)] rounded focus:ring-accent focus:ring-2",disabled:o}),e.jsxs("div",{className:"flex items-center gap-[var(--space-8)]",children:[e.jsx("label",{htmlFor:"published",className:"text-[var(--text-muted)] cursor-pointer",children:t("admin.blog.publishImmediately")}),e.jsxs("div",{className:"flex items-center gap-[var(--space-4)] text-[length:var(--font-100)] text-[var(--text-muted)]",children:[e.jsx(W,{className:"h-[var(--space-12)] w-[var(--space-12)]"}),e.jsx("span",{children:t("admin.blog.public")})]})]})]})]})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-[var(--space-16)] pt-[var(--space-24)] border-t border-[var(--border)]",children:[e.jsxs("div",{className:"flex items-center gap-2 text-[length:var(--font-100)] text-[var(--text-muted)]",children:[e.jsx(ae,{className:"h-[var(--space-16)] w-[var(--space-16)]"}),e.jsxs("span",{children:[t(a?"admin.blog.lastUpdated":"admin.blog.created"),t("admin.blog.createdOn"),new Date().toLocaleDateString()]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{type:"button",onClick:m,className:"btn btn-secondary inline-flex items-center gap-[var(--space-8)] disabled:opacity-50",disabled:o,children:t("admin.common.cancel")}),e.jsx("button",{type:"submit",disabled:o||b.isValid===!1||b.isChecking||!s.title?.trim()||!s.slug?.trim()||!s.excerpt?.trim()||!s.read_time?.trim(),className:"btn btn-primary inline-flex items-center gap-[var(--space-8)] shadow-[var(--shadow-sm)] disabled:opacity-50 disabled:cursor-not-allowed",children:t(o?"admin.blog.saving":a?"admin.blog.updatePost":"admin.blog.createPost")})]})]})]})}function Xe({onClose:a}){const{t:l}=H(),{blogPosts:s,isLoading:n,createBlogPost:x,updateBlogPost:p,deleteBlogPost:m}=oe(),{showEditor:o,setShowEditor:t,editingPost:g,formData:v,errors:h,resetForm:u,setEditingPostData:r,handleFormChange:f,handleValidationError:b,isEditing:T}=Oe(),[I,z]=de.useState(!1),w=async y=>{y.preventDefault(),z(!0);try{const S=me.parse(v);T&&g?await p(g.id,S):await x(S),u()}catch(S){Ae(S)&&b(S)}finally{z(!1)}},A=y=>{r(y)},P=async y=>{if(confirm(l("admin.blog.confirm.delete")))try{await m(y)}catch(S){console.error("Error deleting blog post:",S),alert(l("admin.blog.error.deleteFailed"))}};return n&&s.length===0?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(O,{translationKey:"admin.common.loading",as:"div",shimmerWidth:"100px",className:"text-[var(--text)]"})}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-[length:var(--font-600)] font-semibold text-[var(--text)]",children:e.jsx(O,{translationKey:"admin.blog.title",as:"span",shimmerWidth:"180px"})}),e.jsx("button",{onClick:a,className:"p-2 text-[var(--text-muted)] hover:text-[var(--text)] transition-colors",children:"×"})]}),o?e.jsx("div",{className:"space-y-6",children:e.jsx(He,{isEditing:T,editingPostId:g?.id,formData:v,errors:h,onSubmit:w,onChange:f,onCancel:u,isSubmitting:I})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-[length:var(--font-500)] font-semibold text-[var(--text)]",children:e.jsx(O,{translationKey:"admin.blog.postsTitle",as:"span",shimmerWidth:"120px"})}),e.jsx("p",{className:"text-[length:var(--font-100)] text-[var(--text-muted)] mt-1",children:e.jsx(O,{translationKey:"admin.blog.subtitle",as:"span",shimmerWidth:"300px"})})]}),e.jsxs("button",{onClick:()=>t(!0),className:"btn btn-primary inline-flex items-center gap-[var(--space-8)] shadow-[var(--shadow-sm)]",children:[e.jsx(J,{className:"h-[var(--space-16)] w-[var(--space-16)]"}),e.jsx(O,{translationKey:"admin.blog.addNew",as:"span",shimmerWidth:"120px"})]})]}),e.jsx("div",{className:"space-y-4",children:s.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(M,{className:"h-12 w-12 text-[var(--text-muted)] mx-auto mb-4"}),e.jsx("h3",{className:"text-[length:var(--font-400)] font-medium text-[var(--text)] mb-2",children:e.jsx(O,{translationKey:"admin.blog.noPosts",as:"span",shimmerWidth:"180px"})}),e.jsx("p",{className:"text-[var(--text-muted)] mb-4",children:e.jsx(O,{translationKey:"admin.blog.getStarted",as:"span",shimmerWidth:"350px"})}),e.jsxs("button",{onClick:()=>t(!0),className:"btn btn-primary inline-flex items-center gap-[var(--space-8)]",children:[e.jsx(J,{className:"h-[var(--space-16)] w-[var(--space-16)]"}),e.jsx(O,{translationKey:"admin.blog.createFirst",as:"span",shimmerWidth:"140px"})]})]}):s.map(y=>e.jsx("div",{className:"p-6 bg-[var(--surface)] rounded-[var(--radius-md)] border border-[var(--border)] hover:bg-[var(--surface-strong)] transition-colors",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("h4",{className:"text-[length:var(--font-400)] font-medium text-[var(--text)] truncate",children:y.title}),e.jsx("div",{className:"flex items-center gap-2",children:y.published?e.jsxs("span",{className:"inline-flex items-center gap-[var(--space-4)] px-[var(--space-8)] py-[var(--space-4)] text-[length:var(--font-100)] font-medium rounded-full bg-emerald-500/10 text-emerald-300",children:[e.jsx(W,{className:"h-[var(--space-12)] w-[var(--space-12)]"}),l("admin.blog.status.published")]}):e.jsxs("span",{className:"inline-flex items-center gap-[var(--space-4)] px-[var(--space-8)] py-[var(--space-4)] text-[length:var(--font-100)] font-medium rounded-full bg-[var(--surface-strong)] text-[var(--text-muted)]",children:[e.jsx(ee,{className:"h-[var(--space-12)] w-[var(--space-12)]"}),l("admin.blog.status.draft")]})})]}),e.jsx("p",{className:"text-[var(--text-muted)] text-[length:var(--font-100)] mb-3 line-clamp-2",children:y.excerpt}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-[length:var(--font-100)] text-[var(--text-muted)]",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ae,{className:"h-3 w-3"}),new Date(y.created_at).toLocaleDateString()]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Y,{className:"h-3 w-3"}),y.read_time]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(te,{className:"h-3 w-3"}),"/",y.slug]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[e.jsx("button",{onClick:()=>A(y),className:"p-2 text-[var(--text-muted)] hover:text-[var(--text)] hover:bg-[var(--surface-strong)] transition-colors rounded-[var(--radius-md)]",title:l("admin.blog.editPost"),children:e.jsx(he,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>P(y.id),className:"p-2 text-[var(--text-muted)] hover:text-red-400 hover:bg-red-500/10 transition-colors rounded-[var(--radius-md)]",title:l("admin.blog.deletePost"),children:e.jsx(ue,{className:"h-4 w-4"})})]})]})},y.id))})]})]})}export{Xe as BlogAdmin};
