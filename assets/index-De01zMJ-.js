import{r as i,k as U,j as a,l as M,m as G,n as J,o as Z,c as X,q as Q,X as Y,s as ee,_ as te,t as E,v as se,u as F,w as K,x as H,y as ae,z as re,T as R,P as ne,D as oe}from"./index-siMbvs9L.js";import{C as ie}from"./check-circle-BIr2Zmkl.js";import{m as ce}from"./zodErrorHandler-CM_HDYk9.js";class le extends i.Component{getSnapshotBeforeUpdate(s){const t=this.props.childRef.current;if(t&&s.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=t.offsetHeight||0,r.width=t.offsetWidth||0,r.top=t.offsetTop,r.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function de({children:e,isPresent:s}){const t=i.useId(),r=i.useRef(null),n=i.useRef({width:0,height:0,top:0,left:0}),{nonce:c}=i.useContext(U);return i.useInsertionEffect(()=>{const{width:l,height:o,top:d,left:h}=n.current;if(s||!r.current||!l||!o)return;r.current.dataset.motionPopId=t;const u=document.createElement("style");return c&&(u.nonce=c),document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${t}"] {
            position: absolute !important;
            width: ${l}px !important;
            height: ${o}px !important;
            top: ${d}px !important;
            left: ${h}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[s]),a.jsx(le,{isPresent:s,childRef:r,sizeRef:n,children:i.cloneElement(e,{ref:r})})}const me=({children:e,initial:s,isPresent:t,onExitComplete:r,custom:n,presenceAffectsLayout:c,mode:l})=>{const o=M(ue),d=i.useId(),h=i.useCallback(m=>{o.set(m,!0);for(const j of o.values())if(!j)return;r&&r()},[o,r]),u=i.useMemo(()=>({id:d,initial:s,isPresent:t,custom:n,onExitComplete:h,register:m=>(o.set(m,!1),()=>o.delete(m))}),c?[Math.random(),h]:[t,h]);return i.useMemo(()=>{o.forEach((m,j)=>o.set(j,!1))},[t]),i.useEffect(()=>{!t&&!o.size&&r&&r()},[t]),l==="popLayout"&&(e=a.jsx(de,{isPresent:t,children:e})),a.jsx(G.Provider,{value:u,children:e})};function ue(){return new Map}const P=e=>e.key||"";function _(e){const s=[];return i.Children.forEach(e,t=>{i.isValidElement(t)&&s.push(t)}),s}const pe=({children:e,exitBeforeEnter:s,custom:t,initial:r=!0,onExitComplete:n,presenceAffectsLayout:c=!0,mode:l="sync"})=>{const o=i.useMemo(()=>_(e),[e]),d=o.map(P),h=i.useRef(!0),u=i.useRef(o),m=M(()=>new Map),[j,f]=i.useState(o),[b,k]=i.useState(o);J(()=>{h.current=!1,u.current=o;for(let v=0;v<b.length;v++){const g=P(b[v]);d.includes(g)?m.delete(g):m.get(g)!==!0&&m.set(g,!1)}},[b,d.length,d.join("-")]);const x=[];if(o!==j){let v=[...o];for(let g=0;g<b.length;g++){const w=b[g],S=P(w);d.includes(S)||(v.splice(g,0,w),x.push(w))}l==="wait"&&x.length&&(v=x),k(_(v)),f(o);return}const{forceRender:y}=i.useContext(Z);return a.jsx(a.Fragment,{children:b.map(v=>{const g=P(v),w=o===b||d.includes(g),S=()=>{if(m.has(g))m.set(g,!0);else return;let L=!0;m.forEach($=>{$||(L=!1)}),L&&(y?.(),k(u.current),n&&n())};return a.jsx(me,{isPresent:w,initial:!h.current||r?void 0:!1,custom:w?void 0:t,presenceAffectsLayout:c,mode:l,onExitComplete:w?void 0:S,children:v},g)})})};const fe=X("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);class C{constructor(s=0,t="Network Error"){this.status=s,this.text=t}}const he=()=>{if(!(typeof localStorage>"u"))return{get:e=>Promise.resolve(localStorage.getItem(e)),set:(e,s)=>Promise.resolve(localStorage.setItem(e,s)),remove:e=>Promise.resolve(localStorage.removeItem(e))}},p={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:he()},N=e=>e?typeof e=="string"?{publicKey:e}:e.toString()==="[object Object]"?e:{}:{},ge=(e,s="https://api.emailjs.com")=>{if(!e)return;const t=N(e);p.publicKey=t.publicKey,p.blockHeadless=t.blockHeadless,p.storageProvider=t.storageProvider,p.blockList=t.blockList,p.limitRate=t.limitRate,p.origin=t.origin||s},q=async(e,s,t={})=>{const r=await fetch(p.origin+e,{method:"POST",headers:t,body:s}),n=await r.text(),c=new C(r.status,n);if(r.ok)return c;throw c},D=(e,s,t)=>{if(!e||typeof e!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!s||typeof s!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!t||typeof t!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},be=e=>{if(e&&e.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},I=e=>e.webdriver||!e.languages||e.languages.length===0,z=()=>new C(451,"Unavailable For Headless Browser"),xe=(e,s)=>{if(!Array.isArray(e))throw"The BlockList list has to be an array";if(typeof s!="string")throw"The BlockList watchVariable has to be a string"},ve=e=>!e.list?.length||!e.watchVariable,ye=(e,s)=>e instanceof FormData?e.get(s):e[s],V=(e,s)=>{if(ve(e))return!1;xe(e.list,e.watchVariable);const t=ye(s,e.watchVariable);return typeof t!="string"?!1:e.list.includes(t)},O=()=>new C(403,"Forbidden"),je=(e,s)=>{if(typeof e!="number"||e<0)throw"The LimitRate throttle has to be a positive number";if(s&&typeof s!="string")throw"The LimitRate ID has to be a non-empty string"},we=async(e,s,t)=>{const r=Number(await t.get(e)||0);return s-Date.now()+r},W=async(e,s,t)=>{if(!s.throttle||!t)return!1;je(s.throttle,s.id);const r=s.id||e;return await we(r,s.throttle,t)>0?!0:(await t.set(r,Date.now().toString()),!1)},B=()=>new C(429,"Too Many Requests"),ke=async(e,s,t,r)=>{const n=N(r),c=n.publicKey||p.publicKey,l=n.blockHeadless||p.blockHeadless,o=n.storageProvider||p.storageProvider,d={...p.blockList,...n.blockList},h={...p.limitRate,...n.limitRate};return l&&I(navigator)?Promise.reject(z()):(D(c,e,s),be(t),t&&V(d,t)?Promise.reject(O()):await W(location.pathname,h,o)?Promise.reject(B()):q("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:c,service_id:e,template_id:s,template_params:t}),{"Content-type":"application/json"}))},Ce=e=>{if(!e||e.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"},Pe=e=>typeof e=="string"?document.querySelector(e):e,Se=async(e,s,t,r)=>{const n=N(r),c=n.publicKey||p.publicKey,l=n.blockHeadless||p.blockHeadless,o=p.storageProvider||n.storageProvider,d={...p.blockList,...n.blockList},h={...p.limitRate,...n.limitRate};if(l&&I(navigator))return Promise.reject(z());const u=Pe(t);D(c,e,s),Ce(u);const m=new FormData(u);return V(d,m)?Promise.reject(O()):await W(location.pathname,h,o)?Promise.reject(B()):(m.append("lib_version","4.4.1"),m.append("service_id",e),m.append("template_id",s),m.append("user_id",c),q("/api/v1.0/email/send-form",m))},T={init:ge,send:ke,sendForm:Se,EmailJSResponseStatus:C};function Ee({isOpen:e,onClose:s,message:t}){return a.jsx(pe,{children:e&&a.jsx(Q.div,{initial:{opacity:0,y:-50},animate:{opacity:1,y:0},exit:{opacity:0,y:-50},className:"fixed top-[var(--space-64)] right-[var(--space-16)] z-50",children:a.jsxs("div",{className:"bg-[var(--bg-elevated)] border border-accent/20 rounded-[var(--radius-md)] shadow-[var(--shadow-sm)] p-[var(--space-16)] flex items-start gap-[var(--space-12)] max-w-md",children:[a.jsx(ie,{className:"h-[var(--space-20)] w-[var(--space-20)] text-accent flex-shrink-0 mt-[var(--space-4)]"}),a.jsx("div",{className:"flex-1",children:a.jsx("p",{className:"text-[var(--text)] text-[length:var(--font-100)]",children:t})}),a.jsx("button",{onClick:s,className:"text-[var(--text-muted)] hover:text-[var(--text)] transition-colors","aria-label":"Close notification",children:a.jsx(Y,{className:"h-[var(--space-20)] w-[var(--space-20)]"})})]})})})}const A=ee({from_name:E().min(1,"Name is required").max(100,"Name too long"),from_email:E().email("Invalid email address").max(255,"Email too long"),message:E().min(10,"Message must be at least 10 characters").max(2e3,"Message too long")}),Re=A.extend({status:te(["new","read","replied","archived"]).optional()});function Ne(){const[e,s]=i.useState(!1),[t,r]=i.useState(null),n=i.useCallback(async c=>{try{s(!0),r(null);const l=Re.parse(c),{error:o}=await se.from("contact_submissions").insert(l);if(o)throw o}catch(l){throw console.error("Error creating contact submission:",l),r(l instanceof Error?l.message:"Failed to save contact submission"),l}finally{s(!1)}},[]);return{isLoading:e,error:t,createSubmission:n}}function Le(){const[e,s]=i.useState(!1),[t,r]=i.useState(""),[n,c]=i.useState(!1),[l,o]=i.useState({}),{t:d}=F(),h=Ne(),u=i.useRef(null);i.useEffect(()=>{T.init("jAUnep12KdGWp6a-W")},[]);const m=[{id:"from_name",label:d("contact.name"),type:"text"},{id:"from_email",label:d("contact.email"),type:"email"},{id:"message",label:d("contact.message"),type:"text",isTextArea:!0}],j=async f=>{f.preventDefault(),c(!0),o({});const b=new FormData(f.currentTarget),k={from_name:b.get("from_name"),from_email:b.get("from_email"),message:b.get("message")};try{const x=A.parse(k),y=await T.sendForm("service_cphipqq","template_nfqpjze",f.currentTarget,"jAUnep12KdGWp6a-W");try{await h.createSubmission({from_name:x.from_name,from_email:x.from_email,message:x.message,status:"new"})}catch(v){console.warn("Failed to log contact submission to database:",v)}if(y.text==="OK")r(d("contact.successMessage")),u.current?.reset();else throw new Error("Failed to send email")}catch(x){console.error("Failed to send email:",x);const y=ce(x);Object.keys(y).length>0?(o(y),r(d("contact.validationError"))):r(d("contact.errorMessage"))}finally{s(!0),c(!1)}};return a.jsxs(a.Fragment,{children:[a.jsx(K,{children:a.jsxs("form",{ref:u,className:"stack",style:{"--stack-space":"var(--space-16)"},onSubmit:j,children:[m.map(({id:f,label:b,type:k,isTextArea:x})=>a.jsxs("div",{children:[a.jsx("label",{htmlFor:f,className:"form-label",children:b}),x?a.jsx("textarea",{id:f,name:f,rows:4,required:!0,disabled:n,className:`field ${l[f]?"border-red-500":"border-[var(--border)]"}`}):a.jsx("input",{type:k,id:f,name:f,required:!0,disabled:n,className:`field ${l[f]?"border-red-500":"border-[var(--border)]"}`}),l[f]&&a.jsx("p",{className:"text-red-400 text-[length:var(--font-200)] mt-[var(--space-4)]",children:l[f]})]},f)),a.jsxs("button",{type:"submit",disabled:n,className:`w-full inline-flex items-center justify-center gap-[var(--space-8)] bg-accent 
                     text-black px-[var(--space-24)] py-[var(--space-12)] min-h-[var(--size-tap)] rounded-[var(--radius-md)] text-[length:var(--font-200)] font-medium hover:bg-accent-strong 
                     transition-colors duration-300 disabled:opacity-50 disabled:cursor-not-allowed`,children:[a.jsx(fe,{className:"h-5 w-5"}),d(n?"contact.sending":"contact.sendMessage")]})]})}),a.jsx(Ee,{isOpen:e,onClose:()=>s(!1),message:t})]})}function _e(){const{t:e}=F(),s=[{icon:H,label:e("contact.email"),value:"gorpapyan2@gmail.com",href:"mailto:gorpapyan2@gmail.com"},{icon:ae,label:e("contact.phone"),value:"+374 (98) 500-501",href:"tel:+37498500501"},{icon:re,label:e("contact.location"),value:"Armenia Kapan, Syunik"}];return a.jsxs(K,{className:"stack [--stack-space:var(--space-24)]",children:[a.jsx("h2",{className:"text-[length:var(--font-500)] font-semibold text-[var(--text)]",children:a.jsx(R,{translationKey:"contact.getInTouch",as:"span",shimmerWidth:"150px"})}),a.jsx("div",{className:"stack [--stack-space:var(--space-24)]",children:s.map(({icon:t,label:r,value:n,href:c})=>a.jsxs("div",{className:"flex items-start gap-[var(--space-16)]",children:[a.jsx("div",{className:"icon-circle",children:a.jsx(t,{className:"h-[var(--space-16)] w-[var(--space-16)] text-accent"})}),a.jsxs("div",{children:[a.jsx("div",{className:"text-[length:var(--font-100)] text-[var(--text-muted)]",children:r}),c?a.jsx("a",{href:c,className:"text-[var(--text)] hover:text-accent transition-colors",children:n}):a.jsx("div",{className:"text-[var(--text)]",children:n})]})]},r))})]})}function Ke(){return a.jsxs(ne,{children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent via-blue-400/5 to-transparent"}),a.jsx(oe,{icon:H,title:a.jsx(R,{translationKey:"pages.contact.title",shimmerWidth:"150px"}),subtitle:a.jsx(R,{translationKey:"pages.contact.subtitle",as:"span",shimmerWidth:"300px"})}),a.jsxs("div",{className:"grid md:grid-cols-2 gap-[var(--space-32)]",children:[a.jsx(_e,{}),a.jsx(Le,{})]})]})}export{Ke as ContactPage};
