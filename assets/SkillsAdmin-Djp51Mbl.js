import{u as k,r as w,an as F,j as e,T as y,ao as A}from"./index-siMbvs9L.js";import{g as I}from"./iconMap-CwtlYKFi.js";import{u as D}from"./useAdminCrudForm-BEugt2b5.js";import{A as T,F as l,S as E,T as _,a as K,b as q}from"./AdminToolbar-O7s0lh2N.js";import{A as B,L as G}from"./AdminLoadingState-BlNnS30Y.js";import"./code-2-Uh6hYNEL.js";import"./zodErrorHandler-CM_HDYk9.js";import"./plus-YjYhcHqF.js";function P({onClose:c}){const{t,language:m}=k(),[i,d]=w.useState(m),{skills:o,isLoading:x,createSkill:u,updateSkill:g,deleteSkill:h}=F({language:i}),{showEditor:v,setShowEditor:p,editingItem:b,formData:s,setFormData:r,errors:n,handleSubmit:j,handleEdit:f,handleDelete:N,resetForm:S}=D({createItem:u,updateItem:g,deleteItem:h,schema:A,initialFormData:{title:"",description:"",icon:"Code2",level:0,order_index:0},language:i,confirmDeleteKey:"admin.skills.confirm.delete",deleteErrorKey:"admin.skills.error.deleteFailed",t}),C=["Code2","GitBranch","Workflow","Kanban","Database","Bug","Globe","Lightbulb","Smartphone","Table"];return x?e.jsx(B,{}):e.jsxs("div",{children:[e.jsx(T,{title:e.jsx(y,{translationKey:"admin.skills.title",as:"span",shimmerWidth:"180px"}),onClose:c}),v?e.jsxs("form",{onSubmit:j,className:"space-y-4",children:[e.jsx(G,{value:i,onChange:d,label:t("admin.common.language")}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(l,{label:t("admin.skills.form.title"),value:s.title,onChange:a=>r({...s,title:a}),error:n.title,required:!0}),e.jsx(E,{label:t("admin.skills.form.icon"),value:s.icon,onChange:a=>r({...s,icon:a}),options:C.map(a=>({value:a,label:a}))})]}),e.jsx(_,{label:t("admin.common.description"),value:s.description,onChange:a=>r({...s,description:a}),error:n.description,rows:3,required:!0}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(l,{type:"number",label:t("admin.skills.form.level"),value:s.level,onChange:a=>r({...s,level:parseInt(a)||0}),error:n.level,min:0,max:100,required:!0}),e.jsx(l,{type:"number",label:t("admin.common.orderIndex"),value:s.order_index,onChange:a=>r({...s,order_index:parseInt(a)||0}),min:0})]}),e.jsx(K,{onCancel:S,submitLabel:t(b?"admin.skills.button.update":"admin.skills.button.create"),cancelLabel:t("admin.common.cancel")})]}):e.jsxs(e.Fragment,{children:[e.jsx(q,{title:t("admin.skills.titleCount"),itemCount:o.length,activeLanguage:i,onLanguageChange:d,onAdd:()=>p(!0),addButtonLabel:t("admin.skills.addSkill")}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:o.map(a=>{const L=I(a.icon);return e.jsxs("div",{className:"p-4 bg-[var(--surface)] rounded-[var(--radius-md)] border border-[var(--border)]",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-2 rounded-[var(--radius-md)] bg-accent/10 text-accent",children:e.jsx(L,{className:"h-4 w-4"})}),e.jsx("h4",{className:"text-[length:var(--font-400)] font-medium text-[var(--text)]",children:a.title})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>f(a),className:"p-1 text-[var(--text-muted)] hover:text-[var(--text)] transition-colors",children:e.jsx(Edit,{className:"h-3 w-3"})}),e.jsx("button",{onClick:()=>N(a.id),className:"p-1 text-[var(--text-muted)] hover:text-red-400 transition-colors",children:e.jsx(Trash2,{className:"h-3 w-3"})})]})]}),e.jsx("p",{className:"text-[var(--text-muted)] text-[length:var(--font-100)] mb-3",children:a.description}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center text-[length:var(--font-100)]",children:[e.jsx("span",{className:"text-[var(--text-muted)]",children:t("admin.skills.card.proficiency")}),e.jsxs("span",{className:"text-accent font-semibold",children:[a.level,"%"]})]}),e.jsx("div",{className:"relative h-2 bg-[var(--surface-strong)] rounded-full overflow-hidden",children:e.jsx("div",{className:"absolute top-0 left-0 h-full bg-gradient-to-r from-accent to-accent/80 rounded-full",style:{width:`${a.level}%`}})})]}),e.jsxs("div",{className:"text-[length:var(--font-100)] text-[var(--text-muted)] mt-2",children:[t("admin.experience.orderLabel")," ",a.order_index," | ",t("admin.experience.createdLabel")," ",new Date(a.created_at).toLocaleDateString()]})]},a.id)})})]})]})}export{P as SkillsAdmin};
