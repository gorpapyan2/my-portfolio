import{c as T,u as S,r as f,j as e,T as m,C as A,L as W,a as $,b as K,p as O,d as B,e as P,N as I,P as k,f as H,B as R,g as C,A as E,h as q,U,M as _,i as D}from"./index-siMbvs9L.js";import{C as F}from"./clock-CpV4X0zn.js";const z=T("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);function Y({headings:t,className:i=""}){const{t:o}=S(),[a,l]=f.useState(""),[s,p]=f.useState(!1),g=f.useRef(new Map),b=f.useRef(null);f.useEffect(()=>{if(!a)return;const h=g.current.get(a),n=b.current;if(h&&n){const r=window.matchMedia("(prefers-reduced-motion: reduce)").matches;requestAnimationFrame(()=>{const v=n.getBoundingClientRect(),u=h.getBoundingClientRect(),x=n.scrollTop,c=u.top-v.top,j=x+c-v.height/2+u.height/2;n.scrollTo({top:j,behavior:r?"auto":"smooth"})})}},[a]),f.useEffect(()=>{if(t.length===0)return;let h=null,n=null,r=0;const v=3,u=()=>{const x=t.map(j=>{let y=document.getElementById(j.id);if(!y){const w=document.querySelectorAll("h1, h2, h3, h4, h5, h6");for(const N of w)if(N.textContent?.trim()===j.text){y=N;break}}return{...j,actualId:y?.id||j.id,element:y}}),c=x.filter(j=>!j.element);if(c.length>0&&r<v){console.warn(`TOC: ${c.length} headings not yet in DOM, retry ${r+1}/${v}`),r++,setTimeout(u,100*Math.pow(2,r));return}h=new IntersectionObserver(j=>{const y=j.filter(w=>w.isIntersecting).sort((w,N)=>w.boundingClientRect.top-N.boundingClientRect.top);if(y.length>0){const w=y[0].target.id;w&&l(w)}},{rootMargin:"-64px 0px -60% 0px",threshold:[0,.25,.5,.75,1]}),x.forEach(j=>{j.element&&h?.observe(j.element)})};return n=new MutationObserver(()=>{t.every(x=>document.getElementById(x.id)||Array.from(document.querySelectorAll("h1, h2, h3, h4, h5, h6")).some(c=>c.textContent?.trim()===x.text))&&(n?.disconnect(),u())}),n.observe(document.body,{childList:!0,subtree:!0}),u(),()=>{h?.disconnect(),n?.disconnect()}},[t]);const d=(h,n)=>{h.preventDefault();let r=document.getElementById(n);if(!r){const v=t.find(u=>u.id===n);if(v){const u=document.querySelectorAll("h1, h2, h3, h4, h5, h6");for(const x of u)if(x.textContent?.trim()===v.text){r=x;break}}}if(!r){console.error(`TOC: Heading element #${n} not found in DOM`);return}requestAnimationFrame(()=>{const x=r.getBoundingClientRect().top+window.pageYOffset-80,c=window.matchMedia("(prefers-reduced-motion: reduce)").matches;window.scrollTo({top:x,behavior:c?"auto":"smooth"}),l(r.id)})};return t.length===0?null:e.jsxs("nav",{className:`bg-[var(--surface)] rounded-[var(--radius-md)] border border-[var(--border)] ${i}`,"aria-label":o("aria.tableOfContents"),children:[e.jsxs("button",{onClick:()=>p(!s),className:"lg:hidden w-full flex items-center justify-between p-[var(--space-16)] text-[var(--text)] font-semibold text-[length:var(--font-100)] hover:bg-[var(--surface-strong)] transition-colors","aria-expanded":s,"aria-controls":"toc-content",children:[e.jsx(m,{translationKey:"blog.toc.title",as:"span",shimmerWidth:"120px"}),e.jsx(A,{className:`h-[var(--space-16)] w-[var(--space-16)] transition-transform duration-200 ${s?"rotate-180":""}`,"aria-hidden":"true"})]}),e.jsx("div",{className:"hidden lg:block p-[var(--space-16)] pb-[var(--space-8)]",children:e.jsx("h3",{className:"text-[var(--text)] font-semibold text-[length:var(--font-100)]",children:e.jsx(m,{translationKey:"blog.toc.title",as:"span",shimmerWidth:"120px"})})}),e.jsx("div",{id:"toc-content",ref:b,className:`
          overflow-y-auto overflow-x-hidden
          ${s?"block":"hidden"} lg:block
          lg:max-h-[calc(100vh-12rem)]
          max-h-[50vh]
          scrollbar-thin
        `,style:{scrollbarWidth:"thin",scrollbarColor:"rgba(237, 252, 58, 0.3) transparent"},children:e.jsx("div",{className:"stack p-[var(--space-16)] pt-[var(--space-8)] [--stack-space:var(--space-4)]",children:t.map(h=>{let n=h.id;const r=document.getElementById(h.id);if(r)n=r.id;else{const x=document.querySelectorAll("h1, h2, h3, h4, h5, h6");for(const c of x)if(c.textContent?.trim()===h.text){n=c.id;break}}const v=a===n,u=h.depth===3;return e.jsx("a",{ref:x=>{x?g.current.set(n,x):g.current.delete(n)},href:`#${n}`,onClick:x=>d(x,n),"aria-current":v?"true":void 0,className:`
                  block text-[length:var(--font-100)] transition-all duration-200 px-[var(--space-12)] py-[var(--space-8)] rounded-[var(--radius-sm)]
                  focus:outline-none focus:ring-2 focus:ring-accent focus:ring-offset-2 focus:ring-offset-[var(--bg)]
                  ${u?"ml-[var(--space-16)] pl-[var(--space-16)] border-l-2 border-[var(--border)]":""}
                  ${v?"text-accent font-medium bg-accent/10 border-l-accent":"text-[var(--text-muted)] hover:text-[var(--text)] hover:bg-[var(--surface-strong)]"}
                `,children:h.text},h.id)})})})]})}function V({className:t=""}){const[i,o]=f.useState(0);return f.useEffect(()=>{const a=()=>{const l=window.scrollY,s=document.documentElement.scrollHeight-window.innerHeight,p=l/s*100;o(Math.min(100,Math.max(0,p)))};return window.addEventListener("scroll",a),a(),()=>window.removeEventListener("scroll",a)},[]),e.jsx("div",{className:`fixed top-0 left-0 w-full h-[var(--space-2)] bg-transparent z-50 ${t}`,children:e.jsx("div",{className:"h-full bg-gradient-to-r from-accent to-accent-strong transition-all duration-150 ease-out",style:{width:`${i}%`}})})}const M=T("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);const X=T("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]);function G({title:t,url:i,className:o=""}){const{t:a}=S(),[l,s]=f.useState(!1),[p,g]=f.useState(!1),b=async()=>{if(navigator.share)try{await navigator.share({title:t,text:a("share.checkOutArticle").replace("{title}",t),url:i}),s(!1)}catch(r){console.log("Error sharing:",r)}},d=async()=>{try{await navigator.clipboard.writeText(i),g(!0),setTimeout(()=>g(!1),2e3),s(!1)}catch(r){console.log("Error copying:",r)}},h=()=>{const r=`https://twitter.com/intent/tweet?text=${encodeURIComponent(t)}&url=${encodeURIComponent(i)}`;window.open(r,"_blank","width=600,height=400"),s(!1)},n=()=>{const r=`https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(i)}`;window.open(r,"_blank","width=600,height=400"),s(!1)};return e.jsxs("div",{className:`relative ${o}`,children:[e.jsxs("button",{onClick:()=>s(!l),className:"inline-flex items-center gap-[var(--space-8)] text-[var(--text-muted)] hover:text-accent transition-colors text-[length:var(--font-100)]",title:a("share.title"),children:[e.jsx(M,{className:"h-[var(--space-16)] w-[var(--space-16)]"}),e.jsx("span",{children:a("share.share")})]}),l&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>s(!1)}),e.jsx("div",{className:"absolute top-full left-0 mt-[var(--space-8)] bg-[var(--surface)] backdrop-blur-sm rounded-[var(--radius-md)] border border-[var(--border)] p-[var(--space-8)] z-20 min-w-[12rem]",children:e.jsxs("div",{className:"stack [--stack-space:var(--space-4)]",children:[navigator.share&&e.jsxs("button",{onClick:b,className:"w-full flex items-center gap-[var(--space-12)] px-[var(--space-12)] py-[var(--space-8)] text-[var(--text-muted)] hover:text-[var(--text)] hover:bg-[var(--surface-strong)] rounded-[var(--radius-sm)] transition-colors",children:[e.jsx(M,{className:"h-[var(--space-16)] w-[var(--space-16)]"}),e.jsx("span",{children:a("share.share")})]}),e.jsxs("button",{onClick:h,className:"w-full flex items-center gap-[var(--space-12)] px-[var(--space-12)] py-[var(--space-8)] text-[var(--text-muted)] hover:text-[var(--text)] hover:bg-[var(--surface-strong)] rounded-[var(--radius-sm)] transition-colors",children:[e.jsx(X,{className:"h-[var(--space-16)] w-[var(--space-16)]"}),e.jsx("span",{children:a("share.twitter")})]}),e.jsxs("button",{onClick:n,className:"w-full flex items-center gap-[var(--space-12)] px-[var(--space-12)] py-[var(--space-8)] text-[var(--text-muted)] hover:text-[var(--text)] hover:bg-[var(--surface-strong)] rounded-[var(--radius-sm)] transition-colors",children:[e.jsx(W,{className:"h-[var(--space-16)] w-[var(--space-16)]"}),e.jsx("span",{children:a("share.linkedin")})]}),e.jsxs("button",{onClick:d,className:"w-full flex items-center gap-[var(--space-12)] px-[var(--space-12)] py-[var(--space-8)] text-[var(--text-muted)] hover:text-[var(--text)] hover:bg-[var(--surface-strong)] rounded-[var(--radius-sm)] transition-colors",children:[p?e.jsx($,{className:"h-[var(--space-16)] w-[var(--space-16)] text-green-400"}):e.jsx(K,{className:"h-[var(--space-16)] w-[var(--space-16)]"}),e.jsx("span",{children:a(p?"share.copied":"share.copyLink")})]})]})})]})]})}function J(t){if(!t)return[];const i=[],o=l=>Array.isArray(l.children);function a(l){if(l.type==="heading"){const s=l;if(s.depth<2||s.depth>3){o(s)&&s.children.forEach(a);return}const p=L(s);if(!p){o(s)&&s.children.forEach(a);return}const g=Q(p);i.push({id:g,depth:s.depth,text:p})}o(l)&&l.children.forEach(a)}return a(t),i}function L(t){let i="";return t.type==="text"?t.value:("children"in t&&Array.isArray(t.children)&&(i=t.children.map(o=>L(o)).join("")),i)}function Q(t){return t.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").replace(/^-+|-+$/g,"")}function Z(t){const[i,o]=f.useState([]),[a,l]=f.useState(!1),[s,p]=f.useState(null);return f.useEffect(()=>{(async()=>{try{if(l(!0),p(null),!t){o([]);return}const b=await O(t),d=J(b);o(d)}catch(b){console.error("Error extracting TOC:",b),p(b instanceof Error?b.message:"Failed to extract table of contents"),o([])}finally{l(!1)}})()},[t]),{headings:i,isLoading:a,error:s}}function ee(t,i,o){const a=new Date(t);if(Number.isNaN(a.getTime()))return i("blog.dateUnavailable");try{const l=o==="am"?"hy-AM":o;return new Intl.DateTimeFormat(l,{year:"numeric",month:"long",day:"numeric"}).format(a)}catch{return i("blog.dateUnavailable")}}function te(t,i,o=3){return i.filter(a=>a.id!==t).slice(0,o)}function re(){const{slug:t}=B(),{t:i,language:o}=S(),{blogPosts:a,isLoading:l,error:s,refreshBlogPosts:p}=P(o),[g,b]=f.useState(!1),d=a.find(c=>c.slug===t),{headings:h}=Z(d?.content||"");if(!t)return e.jsx(I,{to:"..",relative:"path",replace:!0});if(l&&!d)return e.jsx(k,{children:e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx(H,{})})});if(s&&!d){const c=async()=>{b(!0);try{await p()}finally{b(!1)}};return e.jsx(k,{children:e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center max-w-md",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-[var(--space-64)] h-[var(--space-64)] rounded-full bg-red-500/10 text-red-400 mb-[var(--space-16)]",children:e.jsx(R,{className:"h-[var(--space-32)] w-[var(--space-32)]"})}),e.jsx("h2",{className:"text-[length:var(--font-600)] font-semibold text-[var(--text)] mb-[var(--space-8)]",children:e.jsx(m,{translationKey:"blog.error.title",as:"span",shimmerWidth:"150px"})}),e.jsx("p",{className:"text-[var(--text-muted)] mb-[var(--space-8)] text-[length:var(--font-100)]",children:s}),e.jsx("p",{className:"text-[var(--text-muted)] mb-[var(--space-24)] text-[length:var(--font-100)]",children:e.jsx(m,{translationKey:"blog.error.description",as:"span",shimmerWidth:"300px"})}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-[var(--space-12)] justify-center",children:[e.jsxs("button",{onClick:c,disabled:g,className:"btn btn-primary inline-flex items-center gap-[var(--space-8)] disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(z,{className:`h-[var(--space-16)] w-[var(--space-16)] ${g?"animate-spin":""}`}),g?e.jsx(m,{translationKey:"blog.error.retrying",shimmerWidth:"100px"}):e.jsx(m,{translationKey:"blog.error.retry",shimmerWidth:"80px"})]}),e.jsxs(C,{to:"..",relative:"path",className:"btn btn-secondary inline-flex items-center gap-[var(--space-8)] text-[var(--text-muted)] hover:text-[var(--text)]",children:[e.jsx(E,{className:"h-[var(--space-16)] w-[var(--space-16)]"}),e.jsx(m,{translationKey:"blog.back",shimmerWidth:"100px"})]})]})]})})})}if(!l&&!d)return e.jsx(k,{children:e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center max-w-md",children:[e.jsx(R,{className:"h-[var(--space-64)] w-[var(--space-64)] text-[var(--text-muted)] mx-auto mb-[var(--space-16)]"}),e.jsx("h2",{className:"text-[length:var(--font-600)] font-semibold text-[var(--text)] mb-[var(--space-16)]",children:e.jsx(m,{translationKey:"blog.notFound.title",as:"span",shimmerWidth:"200px"})}),e.jsx("p",{className:"text-[var(--text-muted)] mb-[var(--space-24)] text-[length:var(--font-200)]",children:e.jsx(m,{translationKey:"blog.notFound.description",as:"span",shimmerWidth:"300px"})}),e.jsxs(C,{to:"..",relative:"path",className:"btn btn-primary inline-flex items-center gap-[var(--space-8)]",children:[e.jsx(E,{className:"h-[var(--space-16)] w-[var(--space-16)]"}),e.jsx(m,{translationKey:"blog.back",shimmerWidth:"100px"})]})]})})});if(!d)return e.jsx(I,{to:"..",relative:"path",replace:!0});const n=typeof window<"u"?window.location.href:"",r=te(d.id,a),v=ee(d.created_at,i,o),u=!!d.image,x=!!d.content;return e.jsxs(k,{className:"!overflow-visible",children:[e.jsx(V,{}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent via-blue-400/5 to-transparent"}),e.jsx("div",{className:"mb-[var(--space-32)]",children:e.jsxs(C,{to:"..",relative:"path",className:"inline-flex items-center gap-[var(--space-8)] text-[var(--text-muted)] hover:text-[var(--text)] transition-colors group",children:[e.jsx(E,{className:"h-[var(--space-16)] w-[var(--space-16)] group-hover:-translate-x-1 transition-transform"}),e.jsx(m,{translationKey:"blog.back",shimmerWidth:"100px"})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-[var(--space-32)]",children:[e.jsxs("div",{className:"lg:col-span-3",children:[e.jsxs("div",{className:"text-center mb-[var(--space-48)]",children:[e.jsx("h1",{className:"text-[length:var(--font-800)] md:text-[length:var(--font-900)] font-semibold text-[var(--text)] mb-[var(--space-24)] leading-[var(--leading-tight)] tracking-[var(--tracking-tight)]",children:d.title}),e.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-[var(--space-24)] text-[var(--text-muted)] mb-[var(--space-32)]",children:[e.jsxs("div",{className:"flex items-center gap-[var(--space-8)]",children:[e.jsx(q,{className:"h-[var(--space-16)] w-[var(--space-16)]"}),e.jsx("span",{children:v})]}),e.jsxs("div",{className:"flex items-center gap-[var(--space-8)]",children:[e.jsx(F,{className:"h-[var(--space-16)] w-[var(--space-16)]"}),e.jsx("span",{children:d.read_time})]}),e.jsxs("div",{className:"flex items-center gap-[var(--space-8)]",children:[e.jsx(U,{className:"h-[var(--space-16)] w-[var(--space-16)]"}),e.jsx(m,{translationKey:"author.name",as:"span",shimmerWidth:"100px"})]}),e.jsx(G,{title:d.title,url:n})]}),u&&e.jsxs("div",{className:"relative aspect-video overflow-hidden rounded-[var(--radius-xl)] mb-[var(--space-32)] shadow-[var(--shadow-md)]",children:[e.jsx("img",{src:d.image||"",alt:d.title,className:"w-full h-full object-cover",loading:"lazy",decoding:"async"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent"})]}),e.jsx("div",{className:"text-[length:var(--font-400)] text-[var(--text-muted)] max-w-4xl mx-auto leading-[var(--leading-loose)]",children:e.jsx("p",{children:d.excerpt})})]}),e.jsx("article",{className:"prose prose-invert max-w-none mb-[var(--space-32)]",children:x?e.jsx(_,{content:d.content||"",className:"prose-headings:text-[var(--text)] prose-headings:font-semibold prose-headings:tracking-[var(--tracking-tight)] prose-p:text-[var(--text-muted)] prose-li:text-[var(--text-muted)] prose-strong:text-[var(--text)] prose-code:text-accent prose-pre:bg-white/5 prose-blockquote:border-accent leading-[var(--leading-loose)]"}):e.jsxs("div",{className:"text-center py-[var(--space-64)]",children:[e.jsx(R,{className:"h-[var(--space-64)] w-[var(--space-64)] text-[var(--text-muted)] mx-auto mb-[var(--space-16)]"}),e.jsx("p",{className:"text-[var(--text-muted)] text-[length:var(--font-300)]",children:e.jsx(m,{translationKey:"blog.noContent",as:"span",shimmerWidth:"200px"})})]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-[var(--space-16)] pt-[var(--space-48)] mt-[var(--space-64)] border-t border-white/10",children:[e.jsxs(C,{to:"..",relative:"path",className:"inline-flex items-center gap-[var(--space-8)] text-accent hover:text-[var(--text)] transition-colors group",children:[e.jsx(E,{className:"h-[var(--space-16)] w-[var(--space-16)] group-hover:-translate-x-1 transition-transform"}),e.jsx(m,{translationKey:"blog.back",shimmerWidth:"100px"})]}),e.jsxs("div",{className:"text-[length:var(--font-100)] text-[var(--text-muted)]",children:[e.jsx(m,{translationKey:"blog.publishedOn",shimmerWidth:"120px"})," ",v]})]})]}),e.jsx("aside",{className:"lg:col-span-1","aria-label":"Table of contents sidebar",children:e.jsx("div",{className:"sticky top-24 self-start stack [--stack-space:var(--space-24)]",children:h.length>0&&e.jsx(Y,{headings:h})})})]}),r.length>0&&e.jsxs("div",{className:"mt-[var(--space-64)]",children:[e.jsxs("div",{className:"text-center mb-[var(--space-48)]",children:[e.jsx("h2",{className:"text-[length:var(--font-700)] font-semibold text-[var(--text)] mb-[var(--space-16)]",children:e.jsx(m,{translationKey:"blog.related.title",as:"span",shimmerWidth:"200px"})}),e.jsx("p",{className:"text-[var(--text-muted)] text-[length:var(--font-300)]",children:e.jsx(m,{translationKey:"blog.related.subtitle",as:"span",shimmerWidth:"250px"})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-[var(--space-32)]",children:r.map(c=>e.jsx(D,{id:c.id,title:c.title,slug:c.slug,excerpt:c.excerpt,content:c.content,image:c.image,created_at:c.created_at,read_time:c.read_time},c.id))})]})]})}export{re as BlogViewPage};
